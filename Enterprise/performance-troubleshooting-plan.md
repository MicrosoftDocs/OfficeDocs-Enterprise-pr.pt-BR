---
title: Plano de solução de problemas de desempenho do Office 365
ms.author: kvice
author: kelleyvice-msft
manager: laurawi
ms.date: 5/10/2019
audience: Admin
ms.topic: conceptual
ms.service: o365-administration
localization_priority: Normal
ms.custom: Adm_O365
search.appverid:
- MET150
- MOE150
- BCS160
ms.assetid: e241e5d9-b1d8-4f1d-a5c8-4106b7325f8c
ms.collection:
- M365-security-compliance
- Ent_O365
description: Você precisa saber as etapas a serem tomadas para identificar e corrigir o retardo, as interrupções e o desempenho lento entre o SharePoint Online, o OneDrive for Business, o Exchange Online ou o Skype for Business Online e o computador cliente? Antes de ligar para o suporte, este artigo pode ajudá-lo a solucionar problemas de desempenho do Office 365 e até mesmo corrigir alguns dos problemas mais comuns.
ms.openlocfilehash: e0117cebc80acbd2b29ce319002dbd3dccafb764
ms.sourcegitcommit: 35c04a3d76cbe851110553e5930557248e8d4d89
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 11/07/2019
ms.locfileid: "38031126"
---
# <a name="performance-troubleshooting-plan-for-office-365"></a><span data-ttu-id="9a40e-104">Plano de solução de problemas de desempenho do Office 365</span><span class="sxs-lookup"><span data-stu-id="9a40e-104">Performance troubleshooting plan for Office 365</span></span>

<span data-ttu-id="9a40e-105">Você precisa saber as etapas a serem tomadas para identificar e corrigir o retardo, as interrupções e o desempenho lento entre o SharePoint Online, o OneDrive for Business, o Exchange Online ou o Skype for Business Online e o computador cliente?</span><span class="sxs-lookup"><span data-stu-id="9a40e-105">Do you need to know the steps to take to identify and fix lags, hangs, and slow performance between SharePoint Online, OneDrive for Business, Exchange Online, or Skype for Business Online, and your client computer?</span></span> <span data-ttu-id="9a40e-106">Antes de ligar para o suporte, este artigo pode ajudá-lo a solucionar problemas de desempenho do Office 365 e até mesmo corrigir alguns dos problemas mais comuns.</span><span class="sxs-lookup"><span data-stu-id="9a40e-106">Before you call support, this article can help you troubleshoot Office 365 performance issues and even fix some of the most common issues.</span></span>
  
<span data-ttu-id="9a40e-107">Este artigo é, na verdade, um plano de ação de exemplo que você pode usar para capturar dados valiosos sobre seu problema de desempenho, pois ele está ocorrendo.</span><span class="sxs-lookup"><span data-stu-id="9a40e-107">This article is actually a sample action plan that you can use to capture valuable data about your performance issue as it's happening.</span></span> <span data-ttu-id="9a40e-108">Alguns problemas principais também estão incluídos neste artigo.</span><span class="sxs-lookup"><span data-stu-id="9a40e-108">Some top issues are also included in this article.</span></span>

<span data-ttu-id="9a40e-109">Se você é novo no desempenho da rede e deseja fazer um plano de longo prazo para monitorar o desempenho entre suas máquinas clientes e o Office 365, confira o artigo sobre [ajuste de desempenho do office 365 e solução de problemas-admin e profissionais de ti](performance-tuning-using-baselines-and-history.md).</span><span class="sxs-lookup"><span data-stu-id="9a40e-109">If you're new to network performance and want to make a long term plan to monitor performance between your client machines and Office 365, take a look at [Office 365 performance tuning and troubleshooting - Admin and IT Pro](performance-tuning-using-baselines-and-history.md).</span></span>
  
## <a name="sample-performance-troubleshooting-action-plan"></a><span data-ttu-id="9a40e-110">Exemplo de plano de ação de solução de problemas de desempenho</span><span class="sxs-lookup"><span data-stu-id="9a40e-110">Sample performance troubleshooting action plan</span></span>

<span data-ttu-id="9a40e-111">Este plano de ação contém duas partes; uma fase de preparação e uma fase de registro em log.</span><span class="sxs-lookup"><span data-stu-id="9a40e-111">This action plan contains two parts; a preparation phase, and a logging phase.</span></span> <span data-ttu-id="9a40e-112">Se você tem um problema de desempenho no momento e precisa fazer a coleta de dados, você pode começar a usar esse plano imediatamente.</span><span class="sxs-lookup"><span data-stu-id="9a40e-112">If you have a performance problem right now, and you need to do data collection, you can start using this plan right away.</span></span>
  
### <a name="prepare-the-client-computer"></a><span data-ttu-id="9a40e-113">Preparar o computador cliente</span><span class="sxs-lookup"><span data-stu-id="9a40e-113">Prepare the client computer</span></span>
  
- <span data-ttu-id="9a40e-114">Encontre um computador cliente que possa reproduzir o problema de desempenho.</span><span class="sxs-lookup"><span data-stu-id="9a40e-114">Find a client computer that can reproduce the performance problem.</span></span> <span data-ttu-id="9a40e-115">Este computador será usado durante o curso de solução de problemas.</span><span class="sxs-lookup"><span data-stu-id="9a40e-115">This computer will be used during the course of troubleshooting.</span></span>
- <span data-ttu-id="9a40e-116">Anote as etapas que causam o problema de desempenho para que você esteja pronto para testar.</span><span class="sxs-lookup"><span data-stu-id="9a40e-116">Write down the steps that cause the performance problem to happen so you're ready when it comes time to test.</span></span>
- <span data-ttu-id="9a40e-117">Instale as ferramentas de coleta e gravação de informações:</span><span class="sxs-lookup"><span data-stu-id="9a40e-117">Install tools for gathering and recording information:</span></span>
  - <span data-ttu-id="9a40e-118">Instale o [Netmon 3,4](https://www.microsoft.com/download/details.aspx?id=4865) (ou use uma ferramenta de rastreamento de rede equivalente).</span><span class="sxs-lookup"><span data-stu-id="9a40e-118">Install [Netmon 3.4](https://www.microsoft.com/download/details.aspx?id=4865) (or use an equivalent network tracing tool).</span></span>
  - <span data-ttu-id="9a40e-119">Instale a edição básica gratuita do [HTTPWatch](https://www.httpwatch.com/download/) (ou use uma ferramenta de rastreamento de rede equivalente).</span><span class="sxs-lookup"><span data-stu-id="9a40e-119">Install the free Basic Edition of [HTTPWatch](https://www.httpwatch.com/download/) (or use an equivalent network Tracing tool).</span></span>
  - <span data-ttu-id="9a40e-120">Use um gravador de tela ou execute o gravador de passos (PSR. exe) que acompanha o Windows Vista e posterior, para manter um registro das etapas realizadas durante o teste.</span><span class="sxs-lookup"><span data-stu-id="9a40e-120">Use a screen recorder or run the Steps Recorder (PSR.exe) that comes with Windows Vista and later, in order to keep a record of the steps you take during testing.</span></span>

### <a name="log-the-performance-issue"></a><span data-ttu-id="9a40e-121">Registrar o problema de desempenho</span><span class="sxs-lookup"><span data-stu-id="9a40e-121">Log the performance issue</span></span>
  
- <span data-ttu-id="9a40e-122">Feche todos os navegadores da Internet estranhos.</span><span class="sxs-lookup"><span data-stu-id="9a40e-122">Close all extraneous Internet browsers.</span></span>
- <span data-ttu-id="9a40e-123">Inicie o gravador de etapas ou outro gravador de tela.</span><span class="sxs-lookup"><span data-stu-id="9a40e-123">Start the Steps Recorder, or another screen recorder.</span></span>
- <span data-ttu-id="9a40e-124">Inicie o Netmon Capture (ou a ferramenta de rastreamento de rede).</span><span class="sxs-lookup"><span data-stu-id="9a40e-124">Start your Netmon capture (or network tracing tool).</span></span>
- <span data-ttu-id="9a40e-125">Limpe o cache DNS no computador cliente a partir da linha de comando digitando ipconfig/flushdns.</span><span class="sxs-lookup"><span data-stu-id="9a40e-125">Clear your DNS cache on the client computer from the command line by typing ipconfig /flushdns.</span></span>
- <span data-ttu-id="9a40e-126">Inicie uma nova sessão do navegador e ative o HTTPWatch.</span><span class="sxs-lookup"><span data-stu-id="9a40e-126">Start a new browser session and turn on HTTPWatch.</span></span>
- <span data-ttu-id="9a40e-127">Opcional: se você estiver testando o Exchange Online, execute a ferramenta Analisador de desempenho de cliente do Exchange a partir do console de administração do Office 365.</span><span class="sxs-lookup"><span data-stu-id="9a40e-127">Optional: If you are testing Exchange Online, run the Exchange Client Performance Analyzer tool from the Office 365 admin console.</span></span>
- <span data-ttu-id="9a40e-128">Reproduza as etapas exatas que causam o problema de desempenho.</span><span class="sxs-lookup"><span data-stu-id="9a40e-128">Reproduce the exact steps that cause the performance issue.</span></span>
- <span data-ttu-id="9a40e-129">Interrompa seu Netmon ou o rastreamento de outra ferramenta.</span><span class="sxs-lookup"><span data-stu-id="9a40e-129">Stop your Netmon or other tool's trace.</span></span>
- <span data-ttu-id="9a40e-130">Na linha de comando, execute uma rota de rastreamento para sua assinatura do Office 365 digitando o seguinte comando e pressionando ENTER:</span><span class="sxs-lookup"><span data-stu-id="9a40e-130">At the command line, run a trace route to your Office 365 subscription by typing the following command and then pressing ENTER:</span></span>

  ``` cmd
  tracert <subscriptionname>.onmicrosoft.com
  ```

- <span data-ttu-id="9a40e-131">Interrompa o gravador de etapas e salve o vídeo.</span><span class="sxs-lookup"><span data-stu-id="9a40e-131">Stop the Steps Recorder and save the video.</span></span> <span data-ttu-id="9a40e-132">Certifique-se de incluir a data e a hora da captura e se ela demonstra um desempenho bom ou ruim.</span><span class="sxs-lookup"><span data-stu-id="9a40e-132">Be sure to include the date and time of the capture and whether it demonstrates good or bad performance.</span></span>
- <span data-ttu-id="9a40e-133">Salve os arquivos de rastreamento.</span><span class="sxs-lookup"><span data-stu-id="9a40e-133">Save the trace files.</span></span> <span data-ttu-id="9a40e-134">Novamente, certifique-se de incluir a data e a hora da captura e se ela demonstra um desempenho bom ou ruim.</span><span class="sxs-lookup"><span data-stu-id="9a40e-134">Again, be sure to include the date and time of the capture and whether it demonstrates good or bad performance.</span></span>

<span data-ttu-id="9a40e-135">Se você não estiver familiarizado com a execução das ferramentas mencionadas neste artigo, não se preocupe porque fornecemos essas etapas em seguida.</span><span class="sxs-lookup"><span data-stu-id="9a40e-135">If you're not familiar with running the tools mentioned in this article, don't worry because we provide those steps next.</span></span> <span data-ttu-id="9a40e-136">Se você estiver acostumado a fazer esse tipo de captura de rede, poderá ignorar [como coletar linhas de base](performance-tuning-using-baselines-and-history.md#how-to-collect-baselines), que descrevem a filtragem e a leitura dos logs.</span><span class="sxs-lookup"><span data-stu-id="9a40e-136">If you're accustomed to doing this kind of network capturing, you can skip to [How to collect baselines](performance-tuning-using-baselines-and-history.md#how-to-collect-baselines), which describes filtering and reading the logs.</span></span>
  
### <a name="flush-the-dns-cache-first"></a><span data-ttu-id="9a40e-137">Liberar primeiro o cache DNS</span><span class="sxs-lookup"><span data-stu-id="9a40e-137">Flush the DNS Cache first</span></span>

<span data-ttu-id="9a40e-138">Por quê?</span><span class="sxs-lookup"><span data-stu-id="9a40e-138">Why?</span></span> <span data-ttu-id="9a40e-139">Liberando o cache DNS que você está iniciando em seus testes com uma ardósia limpa.</span><span class="sxs-lookup"><span data-stu-id="9a40e-139">By flushing out the DNS cache you're starting your tests with a clean slate.</span></span> <span data-ttu-id="9a40e-140">Ao limpar o cache, você está redefinindo o conteúdo do resolvedor de DNS para as entradas mais atualizadas.</span><span class="sxs-lookup"><span data-stu-id="9a40e-140">By clearing the cache, you're resetting the DNS resolver contents to the most up-to-date entries.</span></span> <span data-ttu-id="9a40e-141">Lembre-se de que um flush não remove as entradas de arquivo hosts.</span><span class="sxs-lookup"><span data-stu-id="9a40e-141">Remember that a flush does not remove HOSTs file entries.</span></span> <span data-ttu-id="9a40e-142">Se você usar entradas de arquivo de HOST extensivamente, você deve copiar essas entradas para um arquivo em outro diretório e, em seguida, esvaziar o arquivo HOST.</span><span class="sxs-lookup"><span data-stu-id="9a40e-142">If you use HOST file entries extensively, you should copy those entries out to a file in another directory and then empty the HOST file.</span></span>
  
#### <a name="flush-your-dns-resolver-cache"></a><span data-ttu-id="9a40e-143">Liberar o cache do DNS resolver</span><span class="sxs-lookup"><span data-stu-id="9a40e-143">Flush your DNS resolver cache</span></span>
  
1. <span data-ttu-id="9a40e-144">Abra o prompt de comando, ( **inicie** \> **executar** \> **cmd** ou **tecla** \> Windows **cmd**).</span><span class="sxs-lookup"><span data-stu-id="9a40e-144">Open the command prompt, (either **Start** \> **Run** \> **cmd** or **Windows key** \> **cmd**).</span></span>
2. <span data-ttu-id="9a40e-145">Digite o comando a seguir e pressione ENTER:</span><span class="sxs-lookup"><span data-stu-id="9a40e-145">Type the following command and press ENTER:</span></span>

    ``` cmd
    ipconfig /flushdns
    ```

## <a name="netmon"></a><span data-ttu-id="9a40e-146">Netmon</span><span class="sxs-lookup"><span data-stu-id="9a40e-146">Netmon</span></span>

<span data-ttu-id="9a40e-147">A ferramenta de monitoramento de rede da Microsoft ([Netmon](https://www.microsoft.com/download/details.aspx?id=4865)) analisa pacotes, o que é tráfego, que passa entre computadores em redes.</span><span class="sxs-lookup"><span data-stu-id="9a40e-147">Microsoft's Network Monitoring tool ([Netmon](https://www.microsoft.com/download/details.aspx?id=4865)) analyzes packets, that is traffic, that passes between computers on networks.</span></span> <span data-ttu-id="9a40e-148">Usando o netmon para rastrear o tráfego com o Office 365 você pode capturar, exibir e ler cabeçalhos de pacote, identificar dispositivos intervenientes, verificar as configurações importantes do hardware de rede, procurar pacotes descartados e acompanhar o fluxo de tráfego entre computadores em sua empresa rede e o Office 365.</span><span class="sxs-lookup"><span data-stu-id="9a40e-148">By using Netmon to trace traffic with Office 365 you can capture, view, and read packet headers, identify intervening devices, check important settings on network hardware, look for dropped packets, and follow the flow of traffic between computers on your corporate network and Office 365.</span></span> <span data-ttu-id="9a40e-149">Como o corpo real do tráfego é criptografado, ou seja, ele (viaja na porta 443 por SSL/TLS, você não pode ler os arquivos que estão sendo enviados.</span><span class="sxs-lookup"><span data-stu-id="9a40e-149">Because the actual body of the traffic is encrypted, that is, it(travels on port 443 via SSL/TLS, you can't read the files being sent.</span></span> <span data-ttu-id="9a40e-150">Em vez disso, você obtém um rastreamento não filtrado do caminho que o pacote realiza, o que pode ajudá-lo a rastrear o comportamento do problema.</span><span class="sxs-lookup"><span data-stu-id="9a40e-150">Instead, you get an unfiltered trace of the path that the packet takes which can help you track down the problem behavior.</span></span>
  
<span data-ttu-id="9a40e-151">Certifique-se de não aplicar um filtro no momento.</span><span class="sxs-lookup"><span data-stu-id="9a40e-151">Be sure you don't apply a filter at this time.</span></span> <span data-ttu-id="9a40e-152">Em vez disso, execute as etapas e demonstre o problema antes de interromper o rastreamento e salvar.</span><span class="sxs-lookup"><span data-stu-id="9a40e-152">Instead, run through the steps and demonstrate the problem before stopping the trace and saving.</span></span>
  
<span data-ttu-id="9a40e-153">Após instalar o Netmon 3,4, abra a ferramenta e execute estas etapas:</span><span class="sxs-lookup"><span data-stu-id="9a40e-153">After you install Netmon 3.4, open the tool and take these steps:</span></span>
  
### <a name="take-a-netmon-trace-and-reproduce-the-issue"></a><span data-ttu-id="9a40e-154">Faça um rastreamento do Netmon e reproduza o problema</span><span class="sxs-lookup"><span data-stu-id="9a40e-154">Take a Netmon trace and reproduce the issue</span></span>
  
1. <span data-ttu-id="9a40e-155">Inicie o Netmon 3,4.</span><span class="sxs-lookup"><span data-stu-id="9a40e-155">Launch Netmon 3.4.</span></span>
<span data-ttu-id="9a40e-156">Há três painéis na página **inicial** : **capturas recentes**, **selecione redes**e a **introdução ao monitor de rede da Microsoft 3,4. Aviso**.</span><span class="sxs-lookup"><span data-stu-id="9a40e-156">There are three panes on the **Start** page: **Recent Captures**, **Select Networks**, and the **Getting Started with Microsoft Network Monitor 3.4. Notice**.</span></span> <span data-ttu-id="9a40e-157">O painel Selecionar redes também fornecerá uma lista das redes padrão que você pode capturar.</span><span class="sxs-lookup"><span data-stu-id="9a40e-157">The Select Networks panel will also give you a list of the default networks from which you can capture.</span></span> <span data-ttu-id="9a40e-158">Certifique-se de que as placas de rede estão selecionadas aqui.</span><span class="sxs-lookup"><span data-stu-id="9a40e-158">Be sure that network cards are selected here.</span></span>

2. <span data-ttu-id="9a40e-159">Clique em **nova captura** na parte superior da página **inicial** .</span><span class="sxs-lookup"><span data-stu-id="9a40e-159">Click **New Capture** at the top of the **Start** page.</span></span> <span data-ttu-id="9a40e-160">Isso adiciona uma nova guia ao lado da guia página **inicial** chamada **captura 1**.</span><span class="sxs-lookup"><span data-stu-id="9a40e-160">This adds a new tab beside the **Start** page tab called **Capture 1**.</span></span>
<span data-ttu-id="9a40e-161">![Interface de usuário do Netmon com os novos botões capturar, iniciar e parar realçados.](media/d4527d84-62ec-4301-82d5-e0166ff71f20.PNG)</span><span class="sxs-lookup"><span data-stu-id="9a40e-161">![Netmon's user interface with the New Capture, Start, and Stop buttons highlighted.](media/d4527d84-62ec-4301-82d5-e0166ff71f20.PNG)</span></span>

3. <span data-ttu-id="9a40e-162">Para fazer uma captura simples, clique em **Iniciar** na barra de ferramentas.</span><span class="sxs-lookup"><span data-stu-id="9a40e-162">To take a simple capture, click **Start** on the toolbar.</span></span>

4. <span data-ttu-id="9a40e-163">Reproduza as etapas que apresentam um problema de desempenho.</span><span class="sxs-lookup"><span data-stu-id="9a40e-163">Reproduce the steps that present a performance issue.</span></span>

5. <span data-ttu-id="9a40e-164">Clique em **parar** \> **arquivo** \> **salvar como**.</span><span class="sxs-lookup"><span data-stu-id="9a40e-164">Click **Stop** \> **File** \> **Save As**.</span></span> <span data-ttu-id="9a40e-165">Lembre-se de fornecer a data e hora com o fuso horário e para mencionar se ele demonstra um desempenho ruim ou bom.</span><span class="sxs-lookup"><span data-stu-id="9a40e-165">Remember to give the date and time with the time zone and to mention if it demonstrates bad or good performance.</span></span>

## <a name="httpwatch"></a><span data-ttu-id="9a40e-166">HTTPWatch</span><span class="sxs-lookup"><span data-stu-id="9a40e-166">HTTPWatch</span></span>

<span data-ttu-id="9a40e-167">O [HTTPWatch](https://www.httpwatch.com/download/) é cobrado e uma edição gratuita.</span><span class="sxs-lookup"><span data-stu-id="9a40e-167">[HTTPWatch](https://www.httpwatch.com/download/) comes in charged, and a free edition.</span></span> <span data-ttu-id="9a40e-168">O Basic Edition gratuito cobre tudo o que você precisa para este teste.</span><span class="sxs-lookup"><span data-stu-id="9a40e-168">The free Basic Edition covers everything you need for this test.</span></span> <span data-ttu-id="9a40e-169">O HTTPWatch monitora o tráfego de rede e o tempo de carregamento da página diretamente da janela do navegador.</span><span class="sxs-lookup"><span data-stu-id="9a40e-169">HTTPWatch monitors network traffic and page load time right from your browser window.</span></span> <span data-ttu-id="9a40e-170">HTTPWatch é um plug-in para o Internet Explorer que descreve graficamente o desempenho.</span><span class="sxs-lookup"><span data-stu-id="9a40e-170">HTTPWatch is a plug-in to Internet Explorer that graphically describes performance.</span></span> <span data-ttu-id="9a40e-171">A análise pode ser salva e exibida no HTTPWatch Studio.</span><span class="sxs-lookup"><span data-stu-id="9a40e-171">The analysis can be saved and viewed in HTTPWatch Studio.</span></span>
  
> [!NOTE]
> <span data-ttu-id="9a40e-172">Se você usar outro navegador, como o Firefox, Google Chrome ou se não conseguir instalar o HTTPWatch no Internet Explorer, abra uma nova janela do navegador e pressione F12 no teclado.</span><span class="sxs-lookup"><span data-stu-id="9a40e-172">If you use another browser, such as Firefox, Google Chrome, or if you can't install HTTPWatch in Internet Explorer, open a new browser window and press F12 on your keyboard.</span></span> <span data-ttu-id="9a40e-173">Você deve ver a ferramenta de desenvolvedor pop-up na parte inferior do seu navegador.</span><span class="sxs-lookup"><span data-stu-id="9a40e-173">You should see the Developer Tool pop-up at the bottom of your browser.</span></span> <span data-ttu-id="9a40e-174">Se você usar o Opera, pressione CTRL + SHIFT + I para Web inspector e, em seguida, clique na guia **rede** e conclua o teste descrito abaixo.</span><span class="sxs-lookup"><span data-stu-id="9a40e-174">If you use Opera, press CTRL+SHIFT+I for Web Inspector, then click the **Network** tab and complete the testing outlined below.</span></span> <span data-ttu-id="9a40e-175">As informações serão levemente diferentes, mas os tempos de carregamento ainda serão exibidos em milissegundos.</span><span class="sxs-lookup"><span data-stu-id="9a40e-175">The information will be slightly different, but load times will still be displayed in milliseconds.</span></span> <span data-ttu-id="9a40e-176">> HTTPWatch também é muito útil para problemas com tempos de carregamento de página do SharePoint Online.</span><span class="sxs-lookup"><span data-stu-id="9a40e-176">> HTTPWatch is also very useful for issues with SharePoint Online page load times.</span></span>
  
### <a name="run-httpwatch-and-reproduce-the-issue"></a><span data-ttu-id="9a40e-177">Executar o HTTPWatch e reproduzir o problema</span><span class="sxs-lookup"><span data-stu-id="9a40e-177">Run HTTPWatch and reproduce the issue</span></span>
  
<span data-ttu-id="9a40e-178">HTTPWatch é um plug-in de navegador, então expor a ferramenta no navegador é um pouco diferente para cada versão do Internet Explorer.</span><span class="sxs-lookup"><span data-stu-id="9a40e-178">HTTPWatch is a browser plug-in, so exposing the tool in the browser is slightly different for each version of Internet Explorer.</span></span> <span data-ttu-id="9a40e-179">Normalmente, você pode encontrar HTTPWatch na barra de comandos no navegador Internet Explorer.</span><span class="sxs-lookup"><span data-stu-id="9a40e-179">Typically, you can find HTTPWatch under the Commands bar in the Internet Explorer browser.</span></span> <span data-ttu-id="9a40e-180">Se você não vir o plug-in do HTTPWatch na janela do navegador, verifique a versão do navegador clicando em **ajuda** \> **sobre**ou em versões posteriores do Internet Explorer, clique no símbolo de engrenagem e **sobre o Internet Explorer**.</span><span class="sxs-lookup"><span data-stu-id="9a40e-180">If you don't see the HTTPWatch plug-in in your browser window, check the version of your browser by clicking **Help** \> **About**, or in later versions of Internet Explorer, click the gear symbol and **About Internet Explorer**.</span></span> <span data-ttu-id="9a40e-181">Para iniciar a barra de **comandos** , clique com o botão direito do mouse na barra de menus no Internet Explorer e clique em **barra de comandos**.</span><span class="sxs-lookup"><span data-stu-id="9a40e-181">To launch the **Commands** bar, right-click the menu bar in Internet Explorer and click **Commands bar**.</span></span>

<span data-ttu-id="9a40e-182">No passado, o HTTPWatch foi associado aos comandos e às barras do Explorer, portanto, depois de instalar o, se você não vir imediatamente o ícone (mesmo após a reinicialização), as **ferramentas**de verificação e as barras de ferramentas do ícone.</span><span class="sxs-lookup"><span data-stu-id="9a40e-182">In the past, HTTPWatch has been associated with both the Commands and the Explorer bars, so once you install, if you don't immediately see the icon (even after reboot) check **Tools**, and your toolbars for the icon.</span></span> <span data-ttu-id="9a40e-183">Lembre-se de que as barras de ferramentas podem ser personalizadas e as opções podem ser adicionadas a elas.</span><span class="sxs-lookup"><span data-stu-id="9a40e-183">Remember that toolbars can be customized and options can be added to them.</span></span>

![A barra de ferramentas de comando do Internet Explorer com o ícone HTTPWatch exibido.](media/198590b0-d7b1-4bff-a6ad-e4ec3a1e83df.png)
  
1. <span data-ttu-id="9a40e-185">Inicie o HTTPWatch em uma janela do navegador Internet Explorer.</span><span class="sxs-lookup"><span data-stu-id="9a40e-185">Launch HTTPWatch in an Internet Explorer browser window.</span></span> <span data-ttu-id="9a40e-186">Ele aparece encaixado no navegador na parte inferior da janela.</span><span class="sxs-lookup"><span data-stu-id="9a40e-186">It will appear docked to the browser at the bottom of that window.</span></span> <span data-ttu-id="9a40e-187">Clique em **gravar**.</span><span class="sxs-lookup"><span data-stu-id="9a40e-187">Click **Record**.</span></span>

2. <span data-ttu-id="9a40e-188">Reproduzir as etapas exatas envolvidas no problema de desempenho.</span><span class="sxs-lookup"><span data-stu-id="9a40e-188">Reproduce the exact steps involved in the performance issue.</span></span> <span data-ttu-id="9a40e-189">Clique no botão **parar** no HTTPWatch.</span><span class="sxs-lookup"><span data-stu-id="9a40e-189">Click the **Stop** button in HTTPWatch.</span></span>

3. <span data-ttu-id="9a40e-190">**Salve** o HTTPWatch ou **envie por email**.</span><span class="sxs-lookup"><span data-stu-id="9a40e-190">**Save** the HTTPWatch or **Send by Email**.</span></span> <span data-ttu-id="9a40e-191">Lembre-se de nomear o arquivo para que ele inclua informações de data e hora e uma indicação de que sua inspeção contém uma demonstração de desempenho bom ou ruim.</span><span class="sxs-lookup"><span data-stu-id="9a40e-191">Remember to name the file so that it includes date and time information and an indication of whether your Watch contains a demonstration of good or bad performance.</span></span>

![HTTPWatch mostrando a guia Rede para um carregamento de página da home page do Office 365.](media/021a2c64-d581-49fd-adf4-4c364f589d75.PNG)

<span data-ttu-id="9a40e-193">Esta captura de tela é da versão profissional do HTTPWatch.</span><span class="sxs-lookup"><span data-stu-id="9a40e-193">This screen shot is from the Professional version of HTTPWatch.</span></span> <span data-ttu-id="9a40e-194">Você pode abrir rastreamentos feitos na versão básica em um computador com uma versão profissional e lê-lo.</span><span class="sxs-lookup"><span data-stu-id="9a40e-194">You can open traces taken in the Basic Version on a computer with a Professional version and read it there.</span></span> <span data-ttu-id="9a40e-195">Informações adicionais podem estar disponíveis no rastreamento através desse método.</span><span class="sxs-lookup"><span data-stu-id="9a40e-195">Extra information may be available from the trace through that method.</span></span>

## <a name="problem-steps-recorder"></a><span data-ttu-id="9a40e-196">Gravador de etapas do problema</span><span class="sxs-lookup"><span data-stu-id="9a40e-196">Problem Steps Recorder</span></span>

<span data-ttu-id="9a40e-197">O gravador de passos ou o PSR. exe permite registrar problemas à medida que estão ocorrendo.</span><span class="sxs-lookup"><span data-stu-id="9a40e-197">Steps Recorder, or PSR.exe, allows you to record issues as they are occurring.</span></span> <span data-ttu-id="9a40e-198">É uma ferramenta muito útil e muito simples de ser executada.</span><span class="sxs-lookup"><span data-stu-id="9a40e-198">It's a very useful tool and very simple to run.</span></span>
  
### <a name="run-problem-steps-recorder-psrexe-to-record-your-work"></a><span data-ttu-id="9a40e-199">Executar o gravador de etapas do problema (PSR. exe) para registrar seu trabalho</span><span class="sxs-lookup"><span data-stu-id="9a40e-199">Run Problem Steps Recorder (PSR.exe) to record your work</span></span>
  
1. <span data-ttu-id="9a40e-200">Use **Iniciar** \> \*\*\*\* \> tipo de execução **PSR. exe** \> **OK**ou clique no tipo de **chave** \> do Windows **PSR. exe** \> e pressione Enter.</span><span class="sxs-lookup"><span data-stu-id="9a40e-200">Either use **Start** \> **Run** \> type **PSR.exe** \> **OK**, or, click the **Windows Key** \> type **PSR.exe** \> and then press ENTER.</span></span>

2. <span data-ttu-id="9a40e-201">Quando a janela Small PSR. exe for exibida, clique em **Iniciar registro** e reproduza as etapas que reproduzirão o problema de desempenho.</span><span class="sxs-lookup"><span data-stu-id="9a40e-201">When the small PSR.exe window appears, click **Start Record** and reproduce the steps that reproduce the performance issue.</span></span> <span data-ttu-id="9a40e-202">Você pode adicionar comentários conforme necessário, clicando em **adicionar comentários**.</span><span class="sxs-lookup"><span data-stu-id="9a40e-202">You can add comments as needed, by clicking **Add Comments**.</span></span>

3. <span data-ttu-id="9a40e-203">Clique em **parar registro** quando você tiver concluído as etapas.</span><span class="sxs-lookup"><span data-stu-id="9a40e-203">Click **Stop Record** when you have completed the steps.</span></span> <span data-ttu-id="9a40e-204">Se o problema de desempenho for uma página renderizada, aguarde até que a página seja processada antes de interromper a gravação.</span><span class="sxs-lookup"><span data-stu-id="9a40e-204">If the performance issue is a page render, wait for the page to render before you stop the recording.</span></span>

4. <span data-ttu-id="9a40e-205">Clique em **Salvar**.</span><span class="sxs-lookup"><span data-stu-id="9a40e-205">Click **Save**.</span></span>

![Uma captura de tela do gravador de passos ou PSR. exe.](media/8542b0aa-a3ff-4718-8dc4-43f5521c6c34.PNG)
  
<span data-ttu-id="9a40e-207">A data e hora são registradas para você.</span><span class="sxs-lookup"><span data-stu-id="9a40e-207">The date and time is recorded for you.</span></span> <span data-ttu-id="9a40e-208">Isso vincula seu PSR ao seu rastreamento do Netmon e ao HTTPWatch no momento e ajuda na solução de problemas de precisão.</span><span class="sxs-lookup"><span data-stu-id="9a40e-208">This links your PSR to your Netmon trace and HTTPWatch in time, and helps with precision troubleshooting.</span></span> <span data-ttu-id="9a40e-209">A data e hora no registro PSR podem mostrar um minuto passado entre o login e a navegação da URL e o processamento parcial do site de administração, por exemplo.</span><span class="sxs-lookup"><span data-stu-id="9a40e-209">The date and time in the PSR record can show that a minute passed between the login and browsing of the URL and the partial render of the admin site, for example.</span></span>
  
## <a name="read-your-traces"></a><span data-ttu-id="9a40e-210">Ler seus rastreamentos</span><span class="sxs-lookup"><span data-stu-id="9a40e-210">Read your traces</span></span>

<span data-ttu-id="9a40e-211">Não é possível ensinar tudo sobre a solução de problemas de rede e desempenho que alguém precisa saber por meio de um artigo.</span><span class="sxs-lookup"><span data-stu-id="9a40e-211">It isn't possible to teach everything about network and performance troubleshooting that someone would need to know via an article.</span></span> <span data-ttu-id="9a40e-212">Obter uma boa qualidade de desempenho é a experiência e o conhecimento de como sua rede funciona e normalmente realiza.</span><span class="sxs-lookup"><span data-stu-id="9a40e-212">Getting good at performance takes experience, and knowledge of how your network works and usually performs.</span></span> <span data-ttu-id="9a40e-213">Mas é possível arredondar uma lista de principais problemas e mostrar como as ferramentas podem facilitar a eliminação dos problemas mais comuns.</span><span class="sxs-lookup"><span data-stu-id="9a40e-213">But it is possible to round up a list of top issues and show how tools can make it easier for you to eliminate the most common problems.</span></span>
  
<span data-ttu-id="9a40e-214">Se você deseja pegar as habilidades de leitura de rastreamentos de rede para seus sites do Office 365, não há mais professores do que criar rastros de cargas de página regularmente e obtendo uma experiência de leitura.</span><span class="sxs-lookup"><span data-stu-id="9a40e-214">If you want to pick up skills reading network traces for your Office 365 sites, there is no better teacher than creating traces of page loads regularly and gaining experience reading them.</span></span> <span data-ttu-id="9a40e-215">Por exemplo, quando você tiver uma chance, carregue um serviço do Office 365 e rastreie o processo.</span><span class="sxs-lookup"><span data-stu-id="9a40e-215">For example, when you have a chance, load an Office 365 service and trace the process.</span></span> <span data-ttu-id="9a40e-216">Filtrar o rastreamento do tráfego DNS ou pesquisar o FrameData para o nome do serviço que você navegou.</span><span class="sxs-lookup"><span data-stu-id="9a40e-216">Filter the trace for DNS traffic, or search the FrameData for the name of the service you browsed.</span></span> <span data-ttu-id="9a40e-217">Examine o rastreamento para ter uma ideia das etapas que ocorrem quando o serviço é carregado.</span><span class="sxs-lookup"><span data-stu-id="9a40e-217">Scan the trace to get an idea of the steps that occur when the service loads.</span></span> <span data-ttu-id="9a40e-218">Isso ajudará você a saber qual será a aparência da carga de página normal e, no caso de solução de problemas, especialmente em torno do desempenho, a comparação de rastreamentos ruins pode ensinar muito.</span><span class="sxs-lookup"><span data-stu-id="9a40e-218">This will help you learn what normal page load should look like, and in the case of troubleshooting, particularly around performance, comparing good to bad traces can teach you a lot.</span></span>
  
<span data-ttu-id="9a40e-219">O Netmon usa o Microsoft IntelliSense no campo filtro de exibição.</span><span class="sxs-lookup"><span data-stu-id="9a40e-219">Netmon uses Microsoft Intellisense in the Display filter field.</span></span> <span data-ttu-id="9a40e-220">O IntelliSense ou o auto-completar de código inteligente é que o truque onde você digita um período e todas as opções disponíveis são exibidos em uma caixa de seleção suspensa.</span><span class="sxs-lookup"><span data-stu-id="9a40e-220">Intellisense, or intelligent code completion, is that trick where you type in a period and all available options are displayed in a drop-down selection box.</span></span> <span data-ttu-id="9a40e-221">Se, por exemplo, você estiver preocupado sobre o dimensionamento de janela TCP, você pode encontrar o caminho para um filtro `.protocol.tcp.window < 100`(como) por esse meio.</span><span class="sxs-lookup"><span data-stu-id="9a40e-221">If, for example, you are worried about TCP window scaling, you can find your way to a filter (such as  `.protocol.tcp.window < 100`) by this means.</span></span>
  
![Captura de tela do Netmon mostrando que o campo de filtro de exibição usa o IntelliSense.](media/75a56c11-9a60-47ee-a100-aabdfb1ba10f.PNG)
  
<span data-ttu-id="9a40e-223">Os rastreamentos do Netmon podem ter muito tráfego.</span><span class="sxs-lookup"><span data-stu-id="9a40e-223">Netmon traces can have a lot of traffic in them.</span></span> <span data-ttu-id="9a40e-224">Se você não tiver a leitura deles, provavelmente será sobrecarregado abrir o rastreamento pela primeira vez.</span><span class="sxs-lookup"><span data-stu-id="9a40e-224">If you aren't experienced with reading them, it's likely you will be overwhelmed opening the trace the first time.</span></span> <span data-ttu-id="9a40e-225">A primeira coisa a fazer é separar o sinal do ruído de fundo no rastreamento.</span><span class="sxs-lookup"><span data-stu-id="9a40e-225">The first thing to do is separate the signal from the background noise in the trace.</span></span> <span data-ttu-id="9a40e-226">Você testou o Office 365, e esse é o tráfego que você deseja ver.</span><span class="sxs-lookup"><span data-stu-id="9a40e-226">You tested against Office 365, and that's the traffic you want to see.</span></span> <span data-ttu-id="9a40e-227">Se você for usado para navegar pelos rastreamentos, talvez não precise desta lista.</span><span class="sxs-lookup"><span data-stu-id="9a40e-227">If you are used to navigating through traces, you may not need this list.</span></span>
  
<span data-ttu-id="9a40e-228">O tráfego entre o cliente e o Office 365 passa via TLS, o que significa que o corpo do tráfego será criptografado e não legível em um rastreamento genérico do Netmon.</span><span class="sxs-lookup"><span data-stu-id="9a40e-228">Traffic between your client and Office 365 travels via TLS, which means that the body of the traffic will be encrypted and not readable in a generic Netmon trace.</span></span> <span data-ttu-id="9a40e-229">Sua análise de desempenho não precisa saber as especificidades das informações no pacote.</span><span class="sxs-lookup"><span data-stu-id="9a40e-229">Your performance analysis doesn't need to know the specifics of the information in the packet.</span></span> <span data-ttu-id="9a40e-230">No entanto, é muito interessado nos cabeçalhos de pacote e nas informações que eles contêm.</span><span class="sxs-lookup"><span data-stu-id="9a40e-230">It is, however, very interested in packet headers and the information that they contain.</span></span>
  
### <a name="tips-to-get-a-good-trace"></a><span data-ttu-id="9a40e-231">Dicas para obter um bom rastreamento</span><span class="sxs-lookup"><span data-stu-id="9a40e-231">Tips to get a good trace</span></span>
  
- <span data-ttu-id="9a40e-232">Saiba o valor do endereço IPv4 ou IPv6 do computador cliente.</span><span class="sxs-lookup"><span data-stu-id="9a40e-232">Know the value of the IPv4 or IPv6 address of your client computer.</span></span> <span data-ttu-id="9a40e-233">Você pode fazer isso no prompt de comando digitando **ipconfig** e pressionando ENTER.</span><span class="sxs-lookup"><span data-stu-id="9a40e-233">You can get this from the command prompt by typing **IPConfig** and then pressing ENTER.</span></span> <span data-ttu-id="9a40e-234">O conhecimento deste endereço permitirá que você informe rapidamente se o tráfego no rastreamento envolve diretamente o computador cliente.</span><span class="sxs-lookup"><span data-stu-id="9a40e-234">Knowing this address will let you tell at a glance whether the traffic in the trace directly involves your client computer.</span></span> <span data-ttu-id="9a40e-235">Se houver um proxy conhecido, execute o ping nele e também Obtenha seu endereço IP.</span><span class="sxs-lookup"><span data-stu-id="9a40e-235">If there is a known proxy, ping it and get its IP address as well.</span></span>

- <span data-ttu-id="9a40e-236">Libere o cache do DNS resolver e, se possível, feche todos os navegadores, exceto aquele em que você está executando seus testes.</span><span class="sxs-lookup"><span data-stu-id="9a40e-236">Flush your DNS resolver cache and, if possible, close all browsers except the one in which you are running your tests.</span></span> <span data-ttu-id="9a40e-237">Se não for possível fazer isso, por exemplo, se o suporte estiver usando uma ferramenta baseada em navegador para ver a área de trabalho do computador cliente, prepare-se para filtrar o rastreamento.</span><span class="sxs-lookup"><span data-stu-id="9a40e-237">If you are not able to do this, for instance, if support is using some browser-based tool to see your client computer's desktop, be prepared to filter your trace.</span></span>

- <span data-ttu-id="9a40e-238">Em um rastreamento ocupado, localize o serviço do Office 365 que você está usando.</span><span class="sxs-lookup"><span data-stu-id="9a40e-238">In a busy trace, locate the Office 365 service that you're using.</span></span> <span data-ttu-id="9a40e-239">Se você nunca utilizou o tráfego antes ou raramente, esta é uma etapa útil para separar o problema de desempenho de outros ruídos de rede.</span><span class="sxs-lookup"><span data-stu-id="9a40e-239">If you've never or seldom seen your traffic before, this is a helpful step in separating the performance issue from other network noise.</span></span> <span data-ttu-id="9a40e-240">Há algumas maneiras de fazer isso.</span><span class="sxs-lookup"><span data-stu-id="9a40e-240">There are a few ways to do this.</span></span> <span data-ttu-id="9a40e-241">Diretamente antes do teste, você pode usar _ping_ ou _PsPing_ em relação à URL do serviço específico (`ping outlook.office365.com` ou `psping -4 microsoft-my.sharepoint.com:443`, por exemplo).</span><span class="sxs-lookup"><span data-stu-id="9a40e-241">Directly before your test, you can use _ping_ or _PsPing_ against the URL of the specific service (`ping outlook.office365.com` or `psping -4 microsoft-my.sharepoint.com:443`, for example).</span></span> <span data-ttu-id="9a40e-242">Você também pode encontrar facilmente esse ping ou PsPing em um rastreamento do Netmon (por seu nome de processo).</span><span class="sxs-lookup"><span data-stu-id="9a40e-242">You can also easily find that ping or PsPing in a Netmon trace (by its process name).</span></span> <span data-ttu-id="9a40e-243">Isso fornecerá um lugar para começar a procurar.</span><span class="sxs-lookup"><span data-stu-id="9a40e-243">That will give you a place to start looking.</span></span>

<span data-ttu-id="9a40e-244">Se você estiver usando o rastreamento do Netmon no momento do problema, não há problemas.</span><span class="sxs-lookup"><span data-stu-id="9a40e-244">If you're only using Netmon tracing at the time of the problem, that's okay too.</span></span> <span data-ttu-id="9a40e-245">Para se orientar, use um filtro como `ContainsBin(FrameData, ASCII, "office")` ou `ContainsBin(FrameData, ASCII, "outlook")`.</span><span class="sxs-lookup"><span data-stu-id="9a40e-245">To orient yourself, use a filter like `ContainsBin(FrameData, ASCII, "office")` or `ContainsBin(FrameData, ASCII, "outlook")`.</span></span> <span data-ttu-id="9a40e-246">Você pode gravar seu número de quadro do arquivo de rastreamento.</span><span class="sxs-lookup"><span data-stu-id="9a40e-246">You can record your frame number from the trace file.</span></span> <span data-ttu-id="9a40e-247">Você também pode querer rolar o painel de _Resumo do quadro_ completamente para a direita e procurar a coluna ID da conversa.</span><span class="sxs-lookup"><span data-stu-id="9a40e-247">You may also want to scroll the _Frame Summary_ pane all the way to the right and look for the Conversation ID column.</span></span> <span data-ttu-id="9a40e-248">Há um número indicado na ID dessa conversa específica que você também pode registrar e examinar em isolamento mais tarde.</span><span class="sxs-lookup"><span data-stu-id="9a40e-248">There is a number indicated there for the ID of this specific conversation that you can also record and look at in isolation later.</span></span> <span data-ttu-id="9a40e-249">Lembre-se de remover este filtro antes de aplicar qualquer outra filtragem.</span><span class="sxs-lookup"><span data-stu-id="9a40e-249">Remember to remove this filter before applying any other filtering.</span></span>

> [!TIP]
> <span data-ttu-id="9a40e-250">O Netmon tem muitos filtros internos úteis.</span><span class="sxs-lookup"><span data-stu-id="9a40e-250">Netmon has a lot of helpful built-in filters.</span></span> <span data-ttu-id="9a40e-251">Experimente o botão **carregar filtro** na parte superior do painel Filtro de _exibição_ .</span><span class="sxs-lookup"><span data-stu-id="9a40e-251">Try the **Load Filter** button at the top of the _Display_ filter pane.</span></span>
  
![Encontre seu IP usando PSPing na linha de comando no computador cliente.](media/4c43ac67-e28e-4536-842d-7add7aa28847.PNG)
  
![O Netmon Trace do cliente mostrando o mesmo comando PSPing por meio do filtro TCP. Flags. SYN = = 1.](media/0ae7ef7d-e003-4d01-a006-dc49bd1fcef2.PNG)
  
<span data-ttu-id="9a40e-254">Familiarize-se com o seu tráfego e saiba como localizar as informações necessárias.</span><span class="sxs-lookup"><span data-stu-id="9a40e-254">Get familiar with your traffic, and learn to locate the information you need.</span></span> <span data-ttu-id="9a40e-255">Por exemplo, saiba como determinar qual pacote no rastreamento tem a primeira referência para o serviço do Office 365 que você está usando (como "Outlook").</span><span class="sxs-lookup"><span data-stu-id="9a40e-255">For example, learn to determine which packet in the trace has the first reference to the Office 365 service you're using (like "Outlook").</span></span>

<span data-ttu-id="9a40e-256">Como fazer o Office 365 Outlook online como exemplo, o tráfego começa algo assim:</span><span class="sxs-lookup"><span data-stu-id="9a40e-256">Taking Office 365 Outlook Online as an example, the traffic begins something like this:</span></span>
  
- <span data-ttu-id="9a40e-257">Consulta padrão de DNS e resposta de DNS para outlook.office365.com com QueryIDs correspondentes.</span><span class="sxs-lookup"><span data-stu-id="9a40e-257">DNS Standard Query and DNS Response for outlook.office365.com with matching QueryIDs.</span></span> <span data-ttu-id="9a40e-258">É importante observar a diferença de horário para esta opção, bem como o local em que o DNS global do Office 365 envia a solicitação de resolução de nomes.</span><span class="sxs-lookup"><span data-stu-id="9a40e-258">It's important to note the time offset for this turn-around, as well as where in the world the Office 365 Global DNS sends the request for name resolution.</span></span> <span data-ttu-id="9a40e-259">O ideal é o mais local possível, em vez de na metade do mundo.</span><span class="sxs-lookup"><span data-stu-id="9a40e-259">Ideally, as locally as possible, rather than halfway across the world.</span></span>

- <span data-ttu-id="9a40e-260">Uma solicitação HTTP GET cujo relatório de status é movido permanentemente (301)</span><span class="sxs-lookup"><span data-stu-id="9a40e-260">A HTTP GET Request whose status report Moved Permanently (301)</span></span>

- <span data-ttu-id="9a40e-261">O tráfego de RWS, incluindo as solicitações de conexão de RWS e conexão de respostas.</span><span class="sxs-lookup"><span data-stu-id="9a40e-261">RWS Traffic including RWS Connect requests and Connect replies.</span></span> <span data-ttu-id="9a40e-262">(Esse é um Winsock remoto que faz uma conexão para você.)</span><span class="sxs-lookup"><span data-stu-id="9a40e-262">(This is Remote Winsock making a connection for you.)</span></span>

- <span data-ttu-id="9a40e-263">Uma conversa TCP SYN e TCP SYN/ACK.</span><span class="sxs-lookup"><span data-stu-id="9a40e-263">A TCP SYN and TCP SYN/ACK conversation.</span></span> <span data-ttu-id="9a40e-264">Muitas das configurações nesta conversa afetam seu desempenho.</span><span class="sxs-lookup"><span data-stu-id="9a40e-264">A lot of the settings in this conversation impact your performance.</span></span>

- <span data-ttu-id="9a40e-265">Em seguida, uma série de TLS: tráfego TLS, onde ocorre o handshake TLS e as conversas do certificado TLS.</span><span class="sxs-lookup"><span data-stu-id="9a40e-265">Then a series of TLS:TLS traffic which is where the TLS handshake and TLS certificate conversations take place.</span></span> <span data-ttu-id="9a40e-266">(Lembre-se de que os dados são criptografados via SSL/TLS).</span><span class="sxs-lookup"><span data-stu-id="9a40e-266">(Remember the data is encrypted via SSL/TLS.)</span></span>

<span data-ttu-id="9a40e-267">Todas as partes do tráfego são importantes e estão conectadas, mas pequenas partes do rastreamento contêm informações particularmente importantes em termos de solução de problemas de desempenho, portanto, vamos nos concentrar nessas áreas.</span><span class="sxs-lookup"><span data-stu-id="9a40e-267">All parts of the traffic are important and connected, but small portions of the trace contain information particularly important in terms of performance troubleshooting, so we'll focus on those areas.</span></span> <span data-ttu-id="9a40e-268">Além disso, como fizemos a solução de problemas comuns de desempenho do Office 365 na Microsoft para compilar uma lista dos dez principais problemas comuns, nos concentraremos nesses problemas e como usar as ferramentas que temos que fazer a raiz.</span><span class="sxs-lookup"><span data-stu-id="9a40e-268">Also, since we've done enough Office 365 performance troubleshooting at Microsoft to compile a Top Ten list of common problems, we'll focus on those issues and how to use the tools we have to root them out next.</span></span>
  
<span data-ttu-id="9a40e-269">Se você ainda não instalou todos os itens prontos, a matriz abaixo faz uso de várias ferramentas.</span><span class="sxs-lookup"><span data-stu-id="9a40e-269">If you haven't installed them all ready, the matrix below makes use of several tools.</span></span> <span data-ttu-id="9a40e-270">Sempre que possível.</span><span class="sxs-lookup"><span data-stu-id="9a40e-270">Where possible.</span></span> <span data-ttu-id="9a40e-271">Os links são fornecidos aos pontos de instalação.</span><span class="sxs-lookup"><span data-stu-id="9a40e-271">Links are provided to the installation points.</span></span> <span data-ttu-id="9a40e-272">A lista inclui ferramentas comuns de rastreamento de rede como o [Netmon](https://www.microsoft.com/download/details.aspx?id=4865) e o [Wireshark](https://www.wireshark.org/), mas use qualquer ferramenta de rastreamento com a qual você se sinta confortável e, em que você está acostumado a filtrar o tráfego de rede.</span><span class="sxs-lookup"><span data-stu-id="9a40e-272">The list includes common network tracing tools like [Netmon](https://www.microsoft.com/download/details.aspx?id=4865) and [Wireshark](https://www.wireshark.org/), but use any tracing tool you are comfortable with, and in which you're accustomed to filtering network traffic.</span></span> <span data-ttu-id="9a40e-273">Quando você estiver testando, lembre-se:</span><span class="sxs-lookup"><span data-stu-id="9a40e-273">When you're testing, remember:</span></span>
  
- <span data-ttu-id="9a40e-274">*Feche seus navegadores e teste apenas um navegador executando* : isso reduzirá o tráfego geral que você captura.</span><span class="sxs-lookup"><span data-stu-id="9a40e-274">*Close your browsers, and test with only one browser running*  - This will reduce the overall traffic you capture.</span></span> <span data-ttu-id="9a40e-275">Ele faz um rastreamento de menos ocupado.</span><span class="sxs-lookup"><span data-stu-id="9a40e-275">It makes for a less busy trace.</span></span>
- <span data-ttu-id="9a40e-276">*Libere o cache do resolvedor de DNS no computador cliente* -este será um Tablet limpo quando você começar a usar a captura para um rastreamento mais limpo.</span><span class="sxs-lookup"><span data-stu-id="9a40e-276">*Flush your DNS resolver cache on the client computer*  - This will give you a clean slate when you start to take your capture, for a cleaner trace.</span></span>

## <a name="common-issues"></a><span data-ttu-id="9a40e-277">Problemas comuns</span><span class="sxs-lookup"><span data-stu-id="9a40e-277">Common issues</span></span>

<span data-ttu-id="9a40e-278">Alguns problemas comuns que você pode enfrentar e como encontrá-los em seu rastreamento de rede.</span><span class="sxs-lookup"><span data-stu-id="9a40e-278">Some common issues you may face and how to find them in your Network trace.</span></span>

### <a name="tcp-windows-scaling"></a><span data-ttu-id="9a40e-279">Escala TCP do Windows</span><span class="sxs-lookup"><span data-stu-id="9a40e-279">TCP Windows Scaling</span></span>

<span data-ttu-id="9a40e-280">Encontrado no SYN-SYN/ACK.</span><span class="sxs-lookup"><span data-stu-id="9a40e-280">Found in the SYN - SYN/ACK.</span></span> <span data-ttu-id="9a40e-281">O hardware herdado ou de envelhecimento pode não aproveitar a escala TCP do Windows.</span><span class="sxs-lookup"><span data-stu-id="9a40e-281">Legacy or aging hardware may not take advantage of TCP windows scaling.</span></span>  <span data-ttu-id="9a40e-282">Sem as configurações corretas de dimensionamento TCP do Windows, o buffer de 16 bits padrão em cabeçalhos TCP é preenchido em milissegundos.</span><span class="sxs-lookup"><span data-stu-id="9a40e-282">Without proper TCP windows scaling settings, the default 16-bit buffer in TCP headers fills in milliseconds.</span></span>  <span data-ttu-id="9a40e-283">O tráfego não pode continuar a enviar até que o cliente receba uma confirmação de que os dados originais foram recebidos, causando atrasos.</span><span class="sxs-lookup"><span data-stu-id="9a40e-283">Traffic cannot continue to send until the client receives an acknowledgment that the original data has been received, causing delays.</span></span>

#### <a name="tools"></a><span data-ttu-id="9a40e-284">Ferramentas</span><span class="sxs-lookup"><span data-stu-id="9a40e-284">Tools</span></span>

- <span data-ttu-id="9a40e-285">Netmon</span><span class="sxs-lookup"><span data-stu-id="9a40e-285">Netmon</span></span>
- <span data-ttu-id="9a40e-286">Wireshark</span><span class="sxs-lookup"><span data-stu-id="9a40e-286">Wireshark</span></span>

#### <a name="what-to-look-for"></a><span data-ttu-id="9a40e-287">O que procurar</span><span class="sxs-lookup"><span data-stu-id="9a40e-287">What to look for</span></span>

<span data-ttu-id="9a40e-288">Procure o tráfego SYN-SYN/ACK em seu rastreamento de rede.</span><span class="sxs-lookup"><span data-stu-id="9a40e-288">Look for the SYN - SYN/ACK traffic in your network trace.</span></span>  <span data-ttu-id="9a40e-289">No Netmon, use um filtro como `tcp.flags.syn == 1`.</span><span class="sxs-lookup"><span data-stu-id="9a40e-289">In Netmon, use a filter like  `tcp.flags.syn == 1`.</span></span> <span data-ttu-id="9a40e-290">Esse filtro é o mesmo no Wireshark.</span><span class="sxs-lookup"><span data-stu-id="9a40e-290">This filter is the same in Wireshark.</span></span>  

![Filtro no Netmon ou no Wireshark para pacotes SYN para ambas as ferramentas: TCP. Flags. SYN = = 1.](media/4b9a12a1-c915-43c8-ac2f-a679d0435a29.PNG)

<span data-ttu-id="9a40e-292">Observe que, para cada SYN, há um número de porta de origem (SrcPort) que corresponde à porta de destino (DstPort) da confirmação relacionada (SYN/ACK).</span><span class="sxs-lookup"><span data-stu-id="9a40e-292">Notice that for every SYN there is a source port (SrcPort) number that is matched in the destination port (DstPort) of the related Acknowledgment (SYN/ACK).</span></span>

<span data-ttu-id="9a40e-293">Para ver o valor de escala do Windows usado pela sua conexão de rede, expanda primeiro o SYN e, em seguida, o SYN/ACK relacionado.</span><span class="sxs-lookup"><span data-stu-id="9a40e-293">To see the Windows Scaling value that is used by your network connection, expand first the SYN, and then the related SYN/ACK.</span></span>  

![Gráfico que mostra como fazer a correspondência do SrcPort com o DstPort em um rastreamento, para obter o intervalo de tempo.](media/6a4ca573-0253-4fbd-93e8-92821ee1c351.png)  

### <a name="tcp-idle-time-settings"></a><span data-ttu-id="9a40e-295">Configurações de tempo ocioso do TCP</span><span class="sxs-lookup"><span data-stu-id="9a40e-295">TCP Idle Time Settings</span></span>

<span data-ttu-id="9a40e-296">Historicamente, a maioria das redes de perímetro é configurada para conexões transitórias, ou seja, as conexões ociosas geralmente são terminadas.</span><span class="sxs-lookup"><span data-stu-id="9a40e-296">Historically, most perimeter networks are configured for transient connections, meaning idle connections are generally terminated.</span></span> <span data-ttu-id="9a40e-297">As sessões TCP ociosas podem ser terminadas por proxies e firewalls em mais de 100 a 300 segundos.</span><span class="sxs-lookup"><span data-stu-id="9a40e-297">Idle TCP sessions can be terminated by proxies and firewalls at greater than 100 to 300 seconds.</span></span> <span data-ttu-id="9a40e-298">Isso é problemático para o Outlook online porque ele cria e usa conexões de longo prazo, estando elas ociosas ou não.</span><span class="sxs-lookup"><span data-stu-id="9a40e-298">This is problematic for Outlook Online because it creates and uses long-term connections, whether they are idle or not.</span></span>  

<span data-ttu-id="9a40e-299">Quando as conexões são encerradas por dispositivos de proxy ou firewall, o cliente não é informado e uma tentativa de usar o Outlook online significa que um computador cliente tentará, repetidamente, para reutilizar a conexão antes de criar uma nova.</span><span class="sxs-lookup"><span data-stu-id="9a40e-299">When connections are terminated by proxy or firewall devices, the client is not informed, and an attempt to use Outlook Online will mean a client computer will try, repeatedly, to revive the connection before making a new one.</span></span> <span data-ttu-id="9a40e-300">Você pode ver interrupções no produto, prompts ou baixo desempenho na carga da página.</span><span class="sxs-lookup"><span data-stu-id="9a40e-300">You may see hangs in the product, prompts, or slow performance on page load.</span></span>

#### <a name="tools"></a><span data-ttu-id="9a40e-301">Ferramentas</span><span class="sxs-lookup"><span data-stu-id="9a40e-301">Tools</span></span>

- <span data-ttu-id="9a40e-302">Netmon</span><span class="sxs-lookup"><span data-stu-id="9a40e-302">Netmon</span></span>
- <span data-ttu-id="9a40e-303">Wireshark</span><span class="sxs-lookup"><span data-stu-id="9a40e-303">Wireshark</span></span>

#### <a name="what-to-look-for"></a><span data-ttu-id="9a40e-304">O que procurar</span><span class="sxs-lookup"><span data-stu-id="9a40e-304">What to look for</span></span>

<span data-ttu-id="9a40e-305">No Netmon, observe o campo de diferença de horário para uma viagem de ida e volta.</span><span class="sxs-lookup"><span data-stu-id="9a40e-305">In Netmon, look at the Time Offset field for a round-trip.</span></span> <span data-ttu-id="9a40e-306">Uma viagem de ida e volta é o tempo entre o cliente que envia uma solicitação para o servidor e recebe uma resposta.</span><span class="sxs-lookup"><span data-stu-id="9a40e-306">A round-trip is the time between client sending a request to the server and receiving a response back.</span></span> <span data-ttu-id="9a40e-307">Verifique entre o cliente e o ponto de egresso (ex.</span><span class="sxs-lookup"><span data-stu-id="9a40e-307">Check between the Client and the egress point (ex.</span></span> <span data-ttu-id="9a40e-308">Client--\> proxy) ou o cliente para o Office 365 (Client--\> Office 365).</span><span class="sxs-lookup"><span data-stu-id="9a40e-308">Client --\> Proxy), or the Client to Office 365 (Client --\> Office 365).</span></span> <span data-ttu-id="9a40e-309">Você pode ver isso em vários tipos de pacotes.</span><span class="sxs-lookup"><span data-stu-id="9a40e-309">You can see this in many types of packets.</span></span>

<span data-ttu-id="9a40e-310">Por exemplo, o filtro no Netmon pode parecer `.Protocol.IPv4.Address == 10.102.14.112 AND .Protocol.IPv4.Address == 10.201.114.12`, ou, no Wireshark,. `ip.addr == 10.102.14.112 &amp;&amp; ip.addr == 10.201.114.12`</span><span class="sxs-lookup"><span data-stu-id="9a40e-310">As an example, the filter in Netmon may look like  `.Protocol.IPv4.Address == 10.102.14.112 AND .Protocol.IPv4.Address == 10.201.114.12`, or, in Wireshark,  `ip.addr == 10.102.14.112 &amp;&amp; ip.addr == 10.201.114.12`.</span></span>  

> [!TIP]
> <span data-ttu-id="9a40e-311">Não sabe se o endereço IP em seu rastreamento pertence ao seu servidor DNS?</span><span class="sxs-lookup"><span data-stu-id="9a40e-311">Don't know if the IP address in your trace belongs to your DNS server?</span></span> <span data-ttu-id="9a40e-312">Tente procurá-lo na linha de comando.</span><span class="sxs-lookup"><span data-stu-id="9a40e-312">Try looking it up at the command line.</span></span> <span data-ttu-id="9a40e-313">Clique em **Iniciar** \> **executar** \> e **digite cmd**ou pressione a **tecla** \> Windows e digite **cmd**.</span><span class="sxs-lookup"><span data-stu-id="9a40e-313">Click **Start** \> **Run** \> and type **cmd**, or press **Windows Key** \> and type **cmd**.</span></span> <span data-ttu-id="9a40e-314">No prompt, digite `nslookup <the IP address from the network trace>`.</span><span class="sxs-lookup"><span data-stu-id="9a40e-314">At the prompt, type  `nslookup <the IP address from the network trace>`.</span></span> <span data-ttu-id="9a40e-315">Para testar, use nslookup em relação ao endereço IP do seu próprio computador.</span><span class="sxs-lookup"><span data-stu-id="9a40e-315">To test, use nslookup against your own computer's IP address.</span></span> <span data-ttu-id="9a40e-316">> para ver uma lista dos intervalos de IP da Microsoft, confira [URLs e intervalos de endereços IP do Office 365](https://technet.microsoft.com/library/hh373144.aspx).</span><span class="sxs-lookup"><span data-stu-id="9a40e-316">> To see a list of Microsoft's IP ranges, see [Office 365 URLs and IP address ranges](https://technet.microsoft.com/library/hh373144.aspx).</span></span>

<span data-ttu-id="9a40e-317">Se houver um problema, espere que as compensações de tempo longo sejam exibidas, neste caso (Outlook online), especialmente em TLS: pacotes TLS que mostram a passagem de dados de aplicativo (por exemplo, no Netmon, é possível encontrar `.Protocol.TLS AND Description == "TLS:TLS Rec Layer-1 SSL Application Data"`pacotes de dados de aplicativos via).</span><span class="sxs-lookup"><span data-stu-id="9a40e-317">If there is a problem, expect long Time Offsets to appear, in this case (Outlook Online), particularly in TLS:TLS packets that show the passage of Application Data (for example, in Netmon you can find application data packets via  `.Protocol.TLS AND Description == "TLS:TLS Rec Layer-1 SSL Application Data"`).</span></span> <span data-ttu-id="9a40e-318">Você deve ver uma progressão suave no momento da sessão.</span><span class="sxs-lookup"><span data-stu-id="9a40e-318">You should see a smooth progression in the time across the session.</span></span> <span data-ttu-id="9a40e-319">Se você vir atrasos longos ao atualizar o Outlook online, isso pode ser causado por um alto grau de redefinições que estão sendo enviadas.</span><span class="sxs-lookup"><span data-stu-id="9a40e-319">If you see long delays when refreshing your Outlook Online, this could be caused by a high degree of resets being sent.</span></span>

### <a name="latencyround-trip-time"></a><span data-ttu-id="9a40e-320">Tempo de ida e volta de latência</span><span class="sxs-lookup"><span data-stu-id="9a40e-320">Latency/Round Trip Time</span></span>

<span data-ttu-id="9a40e-321">Latência é uma medida que pode mudar muito, dependendo de muitas variáveis, atualizando dispositivos de envelhecimento, adicionando um grande número de usuários a uma rede e a porcentagem de largura de banda geral consumida por outras tarefas em uma conexão de rede.</span><span class="sxs-lookup"><span data-stu-id="9a40e-321">Latency is a measure that can change a lot depending on many variables, such upgrading aging devices, adding a large number of users to a network, and the percentage of overall bandwidth consumed by other tasks on a network connection.</span></span>

<span data-ttu-id="9a40e-322">Há calculadoras de largura de banda para o Office 365 disponível neste [planejamento de rede e ajuste de desempenho para](network-planning-and-performance.md) a página do Office 365.</span><span class="sxs-lookup"><span data-stu-id="9a40e-322">There are bandwidth calculators for Office 365 available from this [Network planning and performance tuning for Office 365](network-planning-and-performance.md) page.</span></span>  

<span data-ttu-id="9a40e-323">Precisa medir a velocidade da conexão ou a largura de banda da sua conexão de provedor?</span><span class="sxs-lookup"><span data-stu-id="9a40e-323">Need to measure the speed of your connection, or your ISP connection's bandwidth?</span></span> <span data-ttu-id="9a40e-324">Experimente este site (ou sites como ele): [speedtest site oficial](https://www.speedtest.net/)e [Pingtest](https://www.pingtest.net/).</span><span class="sxs-lookup"><span data-stu-id="9a40e-324">Try this site (or sites like it): [Speedtest Official Site](https://www.speedtest.net/), and [Pingtest](https://www.pingtest.net/).</span></span>

#### <a name="tools"></a><span data-ttu-id="9a40e-325">Ferramentas</span><span class="sxs-lookup"><span data-stu-id="9a40e-325">Tools</span></span>

- <span data-ttu-id="9a40e-326">Deverá</span><span class="sxs-lookup"><span data-stu-id="9a40e-326">Ping</span></span>
- <span data-ttu-id="9a40e-327">PsPing</span><span class="sxs-lookup"><span data-stu-id="9a40e-327">PsPing</span></span>
- <span data-ttu-id="9a40e-328">Netmon</span><span class="sxs-lookup"><span data-stu-id="9a40e-328">Netmon</span></span>
- <span data-ttu-id="9a40e-329">Wireshark</span><span class="sxs-lookup"><span data-stu-id="9a40e-329">Wireshark</span></span>

#### <a name="what-to-look-for"></a><span data-ttu-id="9a40e-330">O que procurar</span><span class="sxs-lookup"><span data-stu-id="9a40e-330">What to look for</span></span>

<span data-ttu-id="9a40e-331">Para acompanhar a latência em um rastreamento, você se beneficiará de ter gravado o endereço IP do computador cliente e o endereço IP do servidor DNS no Office 365.</span><span class="sxs-lookup"><span data-stu-id="9a40e-331">To track latency in a trace, you will benefit from having recorded the client computer IP address and the IP address of the DNS server in Office 365.</span></span> <span data-ttu-id="9a40e-332">Isso se aplica à finalidade da filtragem de rastreamento mais fácil.</span><span class="sxs-lookup"><span data-stu-id="9a40e-332">This is for the purpose of easier trace filtering.</span></span> <span data-ttu-id="9a40e-333">Se você se conectar por meio de um proxy, precisará do endereço IP do computador cliente, do endereço IP de proxy/egresso e do endereço IP do DNS do Office 365, para facilitar o trabalho.</span><span class="sxs-lookup"><span data-stu-id="9a40e-333">If you connect through a proxy, you will need your client computer IP address, the proxy/egress IP address, and the Office 365 DNS IP address, to make the work easier.</span></span>  

<span data-ttu-id="9a40e-334">Uma solicitação de ping enviada para o outlook.office365.com informará o nome do datacenter que receberá a solicitação, mesmo que *o ping não possa se* conectar para enviar os pacotes ICMP consecutivos de marca registrada.</span><span class="sxs-lookup"><span data-stu-id="9a40e-334">A ping request sent to outlook.office365.com will tell you the name of the datacenter receiving the request, even if ping  *may*  not be able to connect to send the trademark consecutive ICMP packets.</span></span> <span data-ttu-id="9a40e-335">Se você usar o PsPing (uma ferramenta gratuita para download) e especificar a porta (443) e talvez usar IPv4 (-4), receberá um tempo médio de ida e volta para os pacotes enviados.</span><span class="sxs-lookup"><span data-stu-id="9a40e-335">If you use PsPing (a free tool for download), and specific the port (443) and perhaps to use IPv4 (-4) you will get an average round-trip-time for packets sent.</span></span> <span data-ttu-id="9a40e-336">Isso funcionará para outras URLs nos serviços do Office 365, como `psping -4 yourSite.sharepoint.com:443`.</span><span class="sxs-lookup"><span data-stu-id="9a40e-336">This will work this for other URLs in the Office 365 services, like `psping -4 yourSite.sharepoint.com:443`.</span></span> <span data-ttu-id="9a40e-337">Na verdade, você pode especificar um número de pings para obter uma amostra maior para sua média, tente algo como `psping -4 -n 20 yourSite-my.sharepoint.com:443`.</span><span class="sxs-lookup"><span data-stu-id="9a40e-337">In fact, you can specify a number of pings to get a larger sample for your average, try something like `psping -4 -n 20 yourSite-my.sharepoint.com:443`.</span></span>  

> [!NOTE]
> <span data-ttu-id="9a40e-338">PsPing não envia pacotes ICMP.</span><span class="sxs-lookup"><span data-stu-id="9a40e-338">PsPing doesn't send ICMP packets.</span></span> <span data-ttu-id="9a40e-339">Ele efetua ping com pacotes TCP por meio de uma porta específica, para que você possa usar qualquer um que você sabe que está aberto.</span><span class="sxs-lookup"><span data-stu-id="9a40e-339">It pings with TCP packets over a specific port, so you can use any one you know to be open.</span></span> <span data-ttu-id="9a40e-340">No Office 365, que usa SSL/TLS, tente anexar a porta: 443 ao seu PsPing.</span><span class="sxs-lookup"><span data-stu-id="9a40e-340">In Office 365, which uses SSL/TLS, try attaching port :443 to your PsPing.</span></span>

![Captura de tela que mostra um ping resolvendo outlook.office365.com e um PSPing com o 443, fazendo o mesmo, mas também relatando um RTT médio de 6.5 da MS.](media/c64339f2-2c96-45b8-b168-c2a060430266.PNG)

<span data-ttu-id="9a40e-342">Se você carregou a página de lentidão de execução do Office 365 durante a execução de um rastreamento de rede, filtre um rastreamento `DNS`Netmon ou Wireshark para o.</span><span class="sxs-lookup"><span data-stu-id="9a40e-342">If you loaded the slow performing Office 365 page while doing a network trace, you should filter a Netmon or Wireshark trace for `DNS`.</span></span> <span data-ttu-id="9a40e-343">Este é um dos IPs que estamos procurando.</span><span class="sxs-lookup"><span data-stu-id="9a40e-343">This is one of the IPs we're looking for.</span></span>  

<span data-ttu-id="9a40e-344">Aqui estão as etapas a serem executadas para filtrar o Netmon e obter o endereço IP (e examinar a latência de DNS).</span><span class="sxs-lookup"><span data-stu-id="9a40e-344">Here are the steps to take to filter your Netmon to get the IP address (and take a look at DNS Latency).</span></span> <span data-ttu-id="9a40e-345">Este exemplo usa outlook.office365.com, mas também pode usar a URL de um locatário do SharePoint Online (hithere.sharepoint.com, por exemplo).</span><span class="sxs-lookup"><span data-stu-id="9a40e-345">This example uses outlook.office365.com, but may also use the URL of a SharePoint Online tenant (hithere.sharepoint.com for example).</span></span>  

1. <span data-ttu-id="9a40e-346">Execute o ping `ping outlook.office365.com` na URL e, nos resultados, registre o nome e o endereço IP do servidor DNS para o qual a solicitação ping foi enviada.</span><span class="sxs-lookup"><span data-stu-id="9a40e-346">Ping the URL `ping outlook.office365.com` and, in the results, record the name and IP address of the DNS server the ping request was sent to.</span></span>
2. <span data-ttu-id="9a40e-347">Rastreamento de rede abrindo a página ou executando a ação que dá a você o problema de desempenho ou, se você vir uma alta latência no ping, em si, o rastreamento de rede.</span><span class="sxs-lookup"><span data-stu-id="9a40e-347">Network trace opening the page, or doing the action that gives you the performance problem, or, if you see a high latency on the ping, itself, network trace it.</span></span>
3. <span data-ttu-id="9a40e-348">Abra o rastreamento no Netmon e o filtro para DNS (esse filtro também funciona no Wireshark, mas é confidencial para `-- dns`o caso).</span><span class="sxs-lookup"><span data-stu-id="9a40e-348">Open the trace in Netmon and filter for DNS (this filter also works in Wireshark, but is sensitive to case `-- dns`).</span></span> <span data-ttu-id="9a40e-349">Como você sabe o nome do servidor DNS do seu ping, você também pode filtrar mais speedily no Netmon da seguinte maneira `DNS AND ContainsBin(FrameData, ASCII, "namnorthwest")`:, que tem a seguinte aparência no Wireshark DNS e frame contém "namnorthwest".</span><span class="sxs-lookup"><span data-stu-id="9a40e-349">Since you know the name of the DNS server from your ping you may also filter more speedily in Netmon like this: `DNS AND ContainsBin(FrameData, ASCII, "namnorthwest")`, which looks like this in Wireshark dns and frame contains "namnorthwest".</span></span><br/><span data-ttu-id="9a40e-350">Abra o pacote de resposta e, na janela de detalhes do Netmon **frame** , clique em **DNS** para expandir para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="9a40e-350">Open the response packet and, in the Netmon **Frame Details** window, click **DNS** to expand for more information.</span></span> <span data-ttu-id="9a40e-351">Nas informações de DNS, você encontrará o endereço IP do servidor DNS no qual a solicitação foi enviada no Office 365.</span><span class="sxs-lookup"><span data-stu-id="9a40e-351">In the DNS information you'll find the IP address of the DNS server the request went to in Office 365.</span></span> <span data-ttu-id="9a40e-352">Você precisará desse endereço IP para a próxima etapa (a ferramenta PsPing).</span><span class="sxs-lookup"><span data-stu-id="9a40e-352">You'll need this IP address for the next step (the PsPing tool).</span></span> <span data-ttu-id="9a40e-353">Remover o filtro, clique com o botão direito do mouse na resposta de DNS em Netmon (**Resumo** \> de quadros **Localizar conversas** \> **DNS**) para ver a consulta DNS e a resposta lado a lado.</span><span class="sxs-lookup"><span data-stu-id="9a40e-353">Remove the filter, right-click on the DNS Response in Netmon (**Frame Summary** \> **Find Conversations** \> **DNS**) to see the DNS Query and Response side-by-side.</span></span>
4. <span data-ttu-id="9a40e-354">No Netmon, observe também a coluna de diferença de horário entre a solicitação de DNS e a resposta.</span><span class="sxs-lookup"><span data-stu-id="9a40e-354">In Netmon, also note the Time Offset  column between the DNS Request and Response.</span></span> <span data-ttu-id="9a40e-355">Na próxima etapa, a ferramenta de [PsPing](https://technet.microsoft.com/sysinternals/jj729731.aspx) fácil de instalar e usar é muito útil, pois o ICMP é freqüentemente bloqueado em firewalls, e como o PsPing rastreia a latência de maneira elegante em milissegundos.</span><span class="sxs-lookup"><span data-stu-id="9a40e-355">In the next step, the easy-to-install and use [PsPing](https://technet.microsoft.com/sysinternals/jj729731.aspx) tool comes in very handy, both because ICMP is often blocked on Firewalls, and because PsPing elegantly tracks latency in milliseconds.</span></span> <span data-ttu-id="9a40e-356">O PsPing completa uma conexão TCP com um endereço e uma porta (em nosso caso, a porta aberta 443).</span><span class="sxs-lookup"><span data-stu-id="9a40e-356">PsPing completes a TCP connection to an address and port (in our case open port 443).</span></span>
5. <span data-ttu-id="9a40e-357">Instale o PsPing.</span><span class="sxs-lookup"><span data-stu-id="9a40e-357">Install PsPing.</span></span>
6. <span data-ttu-id="9a40e-358">Abra um prompt de comando ( \> iniciar \> execução digite cmd ou tipo de \> tecla do Windows cmd) e altere o diretório para o diretório onde você instalou o PsPing para executar o comando PsPing.</span><span class="sxs-lookup"><span data-stu-id="9a40e-358">Open a command prompt (Start \> Run \> type cmd, or Windows Key \> type cmd) and change directory to the directory where you installed PsPing to run the PsPing command.</span></span> <span data-ttu-id="9a40e-359">Nos meus exemplos, você pode ver que fiz uma pasta ' perf ' na raiz de C. Você pode fazer o mesmo para acesso rápido.</span><span class="sxs-lookup"><span data-stu-id="9a40e-359">In my examples you can see I made a 'Perf' folder on the root of C. You can do the same for quick access.</span></span>
7. <span data-ttu-id="9a40e-360">Digite o comando para que você esteja fazendo o PsPing em relação ao endereço IP do servidor DNS do Office 365 do seu rastreamento anterior do Netmon, incluindo o número da `psping -n 20 132.245.24.82:445`porta, como.</span><span class="sxs-lookup"><span data-stu-id="9a40e-360">Type the command so that you're making your PsPing against the IP address of the Office 365 DNS server from your earlier Netmon trace, including the port number, like `psping -n 20 132.245.24.82:445`.</span></span> <span data-ttu-id="9a40e-361">Isso fornecerá uma amostra de 20 pings e a média da latência quando o PsPing parar.</span><span class="sxs-lookup"><span data-stu-id="9a40e-361">This will give you a sampling of 20 pings and average the latency when PsPing stops.</span></span>

<span data-ttu-id="9a40e-362">Se você for o Office 365 por meio de um servidor proxy, as etapas são um pouco diferentes.</span><span class="sxs-lookup"><span data-stu-id="9a40e-362">If you're going to Office 365 through a proxy server, the steps are a little different.</span></span> <span data-ttu-id="9a40e-363">Você primeiro PsPing ao seu servidor proxy para obter um valor médio de latência em milissegundos para proxy/saída e para trás e, em seguida, executar o PsPing no proxy ou em um computador com uma conexão direta com a Internet para obter o valor ausente (o para o Office 365 e o back).</span><span class="sxs-lookup"><span data-stu-id="9a40e-363">You would first PsPing to your proxy server to get an average latency value in milliseconds to proxy/egress and back, and then either run PsPing on the proxy, or on a computer with a direct Internet connection to get the missing value (the one to Office 365 and back).</span></span>  

<span data-ttu-id="9a40e-364">Se você escolher executar o PsPing do proxy, terá dois valores de milissegundos: computador cliente para servidor proxy ou ponto de saída e servidor proxy para o Office 365.</span><span class="sxs-lookup"><span data-stu-id="9a40e-364">If you choose to run PsPing from the proxy, you'll have two millisecond values: Client computer to proxy server or egress point, and proxy server to Office 365.</span></span> <span data-ttu-id="9a40e-365">E você terminou!</span><span class="sxs-lookup"><span data-stu-id="9a40e-365">And you're done!</span></span> <span data-ttu-id="9a40e-366">Bem, gravar valores, de qualquer forma.</span><span class="sxs-lookup"><span data-stu-id="9a40e-366">Well, recording values, anyway.</span></span>  

<span data-ttu-id="9a40e-367">Se você executar o PsPing em outro computador cliente que tenha uma conexão direta com a Internet, ou seja, sem um proxy, você terá dois valores de milissegundos: computador cliente para servidor proxy ou ponto de saída e computador cliente para o Office 365.</span><span class="sxs-lookup"><span data-stu-id="9a40e-367">If you run PsPing on another client computer that has a direct connection to the Internet, that is, without a proxy, you will have two millisecond values: Client computer to proxy server or egress point, and client computer to Office 365.</span></span> <span data-ttu-id="9a40e-368">Nesse caso, subtrair o valor do computador cliente para o servidor proxy ou o ponto de saída do valor de computador cliente para o Office 365 e você terá os números de RTT do computador cliente para o servidor proxy ou ponto de saída e do servidor proxy ou ponto de saída para offi CE 365.</span><span class="sxs-lookup"><span data-stu-id="9a40e-368">In this case, subtract the value of client computer to proxy server or egress point from the value of client computer to Office 365, and you will have the RTT numbers from your client computer to the proxy server or egress point, and from proxy server or egress point to Office 365.</span></span>

<span data-ttu-id="9a40e-369">No entanto, se for possível localizar um computador cliente no local afetado que esteja conectado diretamente ou ignorar o proxy, você poderá optar por ver se o problema reproduzirá o computador e testá-lo posteriormente.</span><span class="sxs-lookup"><span data-stu-id="9a40e-369">However, if you can find a client computer in the impacted location that is directly connected, or bypasses the proxy, you may choose to see if the issue reproduces there to begin with, and test using it thereafter.</span></span>

<span data-ttu-id="9a40e-370">Latência, conforme visto em um rastreamento do Netmon, esses milissegundos extras podem ser adicionados, se houver um suficiente em uma determinada sessão.</span><span class="sxs-lookup"><span data-stu-id="9a40e-370">Latency, as seen in a Netmon trace, those extra milliseconds can add up, if there are enough of them in any given session.</span></span>  

![Latência geral no Netmon, com a coluna de Intervalo de Tempo padrão do Netmon adicionada ao Resumo do Quadro.](media/7ad17380-8527-4bc2-9b9b-6310cf19ba6b.PNG)

> [!NOTE]
> <span data-ttu-id="9a40e-372">Seu endereço IP pode ser diferente do IPs mostrado aqui, por exemplo, o ping pode retornar algo como 157.56.0.0/16 ou um intervalo semelhante.</span><span class="sxs-lookup"><span data-stu-id="9a40e-372">Your IP address may be different than the IPs shown here, for example, your ping may return something more like 157.56.0.0/16 or a similar range.</span></span> <span data-ttu-id="9a40e-373">Para obter uma lista de intervalos usados pelo Office 365, confira [URLs e intervalos de endereços IP do office 365](https://technet.microsoft.com/library/hh373144.aspx).</span><span class="sxs-lookup"><span data-stu-id="9a40e-373">For a list of ranges used by Office 365, check out [Office 365 URLs and IP address ranges](https://technet.microsoft.com/library/hh373144.aspx).</span></span>

<span data-ttu-id="9a40e-374">Lembre-se de expandir todos os nós (há um botão na parte superior para isso) se você deseja pesquisar, por exemplo, 132,245.</span><span class="sxs-lookup"><span data-stu-id="9a40e-374">Remember to expand all the nodes (there's a button at the top for this) if you want to search for, for example, 132.245.</span></span>

### <a name="proxy-authentication"></a><span data-ttu-id="9a40e-375">Autenticação de proxy</span><span class="sxs-lookup"><span data-stu-id="9a40e-375">Proxy Authentication</span></span>

<span data-ttu-id="9a40e-376">Isso só se aplica a você se você estiver indo por um servidor proxy.</span><span class="sxs-lookup"><span data-stu-id="9a40e-376">This only applies to you if you're going through a proxy server.</span></span> <span data-ttu-id="9a40e-377">Caso contrário, você pode ignorar estas etapas.</span><span class="sxs-lookup"><span data-stu-id="9a40e-377">If not, you can skip these steps.</span></span> <span data-ttu-id="9a40e-378">Quando estiver funcionando corretamente, a autenticação de proxy deve ocorrer em milissegundos, de forma consistente.</span><span class="sxs-lookup"><span data-stu-id="9a40e-378">When working properly, proxy authentication should take place in milliseconds, consistently.</span></span> <span data-ttu-id="9a40e-379">Você não deve ver desempenho intermitente incorreto durante períodos de pico de uso (por exemplo).</span><span class="sxs-lookup"><span data-stu-id="9a40e-379">You shouldn't see intermittent bad performance during peak usage periods (for example).</span></span>  

<span data-ttu-id="9a40e-380">Se a autenticação de proxy estiver ativada, sempre que você fizer uma nova conexão TCP com o Office 365 para obter informações, será necessário passar por um processo de autenticação em segundo plano.</span><span class="sxs-lookup"><span data-stu-id="9a40e-380">If Proxy authentication is on, each time you make a new TCP connection to Office 365 to get information, you need to pass through an authentication process behind the scenes.</span></span> <span data-ttu-id="9a40e-381">Portanto, por exemplo, ao alternar do calendário para email no Outlook online, você irá autenticar.</span><span class="sxs-lookup"><span data-stu-id="9a40e-381">So, for example, when switching from Calendar to Mail in Outlook Online, you will authenticate.</span></span> <span data-ttu-id="9a40e-382">E no SharePoint Online, se uma página Exibir mídia ou dados de vários sites ou locais, você será autenticado para cada conexão TCP diferente que é necessária para renderizar os dados.</span><span class="sxs-lookup"><span data-stu-id="9a40e-382">And in SharePoint Online, if a page displays media or data from multiple sites or locations, you will authenticate for each different TCP connection that is needed in order to render the data.</span></span>  

<span data-ttu-id="9a40e-383">No Outlook online, você pode experimentar tempos de carregamento lentos sempre que alterna entre o calendário e sua caixa de correio, ou cargas de página lentas no SharePoint Online.</span><span class="sxs-lookup"><span data-stu-id="9a40e-383">In Outlook Online, you may experience slow load times whenever you switch between Calendar and your mailbox, or slow page loads in SharePoint Online.</span></span> <span data-ttu-id="9a40e-384">No entanto, há outros sintomas não listados aqui.</span><span class="sxs-lookup"><span data-stu-id="9a40e-384">However, there are other symptoms not listed here.</span></span>

<span data-ttu-id="9a40e-385">A autenticação de proxy é uma configuração no seu servidor proxy de saída.</span><span class="sxs-lookup"><span data-stu-id="9a40e-385">Proxy authentication is a setting on your egress proxy server.</span></span> <span data-ttu-id="9a40e-386">Se estiver causando um problema de desempenho com o Office 365, você deve consultar sua equipe de rede.</span><span class="sxs-lookup"><span data-stu-id="9a40e-386">If it is causing a performance issue with Office 365, you must consult your networking team.</span></span>  

#### <a name="tools"></a><span data-ttu-id="9a40e-387">Ferramentas</span><span class="sxs-lookup"><span data-stu-id="9a40e-387">Tools</span></span>

- <span data-ttu-id="9a40e-388">Netmon</span><span class="sxs-lookup"><span data-stu-id="9a40e-388">Netmon</span></span>
- <span data-ttu-id="9a40e-389">Wireshark</span><span class="sxs-lookup"><span data-stu-id="9a40e-389">Wireshark</span></span>

#### <a name="what-to-look-for"></a><span data-ttu-id="9a40e-390">O que procurar</span><span class="sxs-lookup"><span data-stu-id="9a40e-390">What to look for</span></span>

<span data-ttu-id="9a40e-391">A autenticação de proxy ocorre sempre que uma nova sessão TCP deve ser girada, geralmente para solicitar arquivos ou informações do servidor ou fornecer informações.</span><span class="sxs-lookup"><span data-stu-id="9a40e-391">Proxy authentication takes place whenever a new TCP session must be spun up, commonly to request files or info from the server, or to supply info.</span></span> <span data-ttu-id="9a40e-392">Por exemplo, você pode ver a autenticação de proxy em torno de solicitações HTTP GET ou HTTP POST.</span><span class="sxs-lookup"><span data-stu-id="9a40e-392">For example, you may see proxy authentication around HTTP GET or HTTP POST requests.</span></span> <span data-ttu-id="9a40e-393">Se você deseja ver os quadros em que você está Autenticando solicitações em seu rastreamento, adicione a coluna ' Resumo do NTLMSSP ' ao Netmon e `.property.NTLMSSPSummary`o filtro.</span><span class="sxs-lookup"><span data-stu-id="9a40e-393">If you want to see the frames where you are authenticating requests in your trace, add the 'NTLMSSP Summary' column to Netmon and filter for  `.property.NTLMSSPSummary`.</span></span> <span data-ttu-id="9a40e-394">Para ver quanto tempo a autenticação está levando, adicione a coluna intervalo de tempo.</span><span class="sxs-lookup"><span data-stu-id="9a40e-394">To see how long the authentication is taking, add the Time Delta column.</span></span>

<span data-ttu-id="9a40e-395">Para adicionar uma coluna ao Netmon:</span><span class="sxs-lookup"><span data-stu-id="9a40e-395">To add a column to Netmon:</span></span>

1. <span data-ttu-id="9a40e-396">Clique com o botão direito do mouse em uma coluna, como **Descrição**.</span><span class="sxs-lookup"><span data-stu-id="9a40e-396">Right-click on a column such as **Description**.</span></span>
2. <span data-ttu-id="9a40e-397">Clique em **escolher colunas**.</span><span class="sxs-lookup"><span data-stu-id="9a40e-397">Click **Choose Columns**.</span></span>
3. <span data-ttu-id="9a40e-398">Localize o _Resumo do NTLMSSP_ e o intervalo de _tempo_ na lista e clique em **Adicionar**.</span><span class="sxs-lookup"><span data-stu-id="9a40e-398">Locate _NTLMSSP Summary_ and _Time Delta_ in the list and click **Add**.</span></span>
4. <span data-ttu-id="9a40e-399">Mova as novas colunas para o lugar antes ou para trás da coluna _Descrição_ para que você possa lê-las lado a lado.</span><span class="sxs-lookup"><span data-stu-id="9a40e-399">Move the new columns into place before or behind the _Description_ column so you can read them side-by-side.</span></span>
5. <span data-ttu-id="9a40e-400">Clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="9a40e-400">Click **OK**.</span></span>

<span data-ttu-id="9a40e-401">Mesmo que você não adicione a coluna, o filtro do Netmon funcionará.</span><span class="sxs-lookup"><span data-stu-id="9a40e-401">Even if you don't add the column, the Netmon filter will work.</span></span> <span data-ttu-id="9a40e-402">Mas sua solução de problemas será muito mais fácil se você puder ver qual estágio de autenticação você está.</span><span class="sxs-lookup"><span data-stu-id="9a40e-402">But your troubleshooting will be much easier if you can see what stage of authentication you're in.</span></span>

<span data-ttu-id="9a40e-403">Ao procurar instâncias de autenticação de proxy, não se esqueça de estudar todos os quadros em que há um desafio NTLM ou uma mensagem de autenticação está presente.</span><span class="sxs-lookup"><span data-stu-id="9a40e-403">When looking for instances of Proxy Authentication, be sure to study all frames where there is an NTLM Challenge, or an Authenticate Message is present.</span></span> <span data-ttu-id="9a40e-404">Se necessário, clique com o botão direito do mouse no trecho específico de \> tráfego e encontre as conversas TCP.</span><span class="sxs-lookup"><span data-stu-id="9a40e-404">If necessary, right-click the specific piece of traffic and Find Conversations \> TCP.</span></span> <span data-ttu-id="9a40e-405">Esteja ciente dos valores Delta de tempo nessas conversas.</span><span class="sxs-lookup"><span data-stu-id="9a40e-405">Be aware of the Time Delta values in these Conversations.</span></span>

![O Netmon Trace mostrando a autenticação de proxy, filtrada por conversa.](media/b640f176-0a52-4bbb-972e-60fb3d6aece2.PNG)

<span data-ttu-id="9a40e-407">Um atraso de quatro segundos na autenticação de proxy, como visto no Wireshark.</span><span class="sxs-lookup"><span data-stu-id="9a40e-407">A four second delay in proxy authentication as seen in Wireshark.</span></span> <span data-ttu-id="9a40e-408">O **intervalo de tempo da coluna de quadro exibida anterior** foi feito por meio do clique com o botão direito do mouse no campo com o mesmo nome nos detalhes do quadro e selecionando Adicionar como coluna.</span><span class="sxs-lookup"><span data-stu-id="9a40e-408">The **Time delta from previous displayed frame** column was made via right-clicking the field of the same name in the frame details and selecting Add as Column.</span></span>  <br/> <span data-ttu-id="9a40e-409">![No Wireshark, a coluna ' intervalo de tempo de um quadro anterior exibido ' pode ser feita por meio do clique com o botão direito do mouse no campo com o mesmo nome nos detalhes do quadro e selecionando Adicionar como coluna.](media/f5b7bde4-8067-4ee0-bc7f-e9062ce1ba6f.PNG)</span><span class="sxs-lookup"><span data-stu-id="9a40e-409">![In Wireshark, the 'Time delta from previous displayed frame' column can be made via right-clicking the field of the same name in the frame details and selecting Add as Column.](media/f5b7bde4-8067-4ee0-bc7f-e9062ce1ba6f.PNG)</span></span>

### <a name="dns-performance"></a><span data-ttu-id="9a40e-410">Desempenho de DNS</span><span class="sxs-lookup"><span data-stu-id="9a40e-410">DNS Performance</span></span>

<span data-ttu-id="9a40e-411">A resolução de nomes funciona melhor e com mais rapidez quando ocorre o mais próximo possível do país do cliente.</span><span class="sxs-lookup"><span data-stu-id="9a40e-411">Name resolution works best and most quickly when it takes place as close to the client's country as possible.</span></span>

<span data-ttu-id="9a40e-412">Se a resolução de nomes DNS estiver ocorrendo no exterior, poderá adicionar segundos à página.</span><span class="sxs-lookup"><span data-stu-id="9a40e-412">If DNS name resolution is taking place overseas, it can add seconds to page loads.</span></span> <span data-ttu-id="9a40e-413">Idealmente, a resolução de nome ocorre em 100 ms.</span><span class="sxs-lookup"><span data-stu-id="9a40e-413">Ideally, name resolution happens in under 100ms.</span></span> <span data-ttu-id="9a40e-414">Caso contrário, você deve fazer uma investigação adicional.</span><span class="sxs-lookup"><span data-stu-id="9a40e-414">If not, you should do further investigation.</span></span>

> [!TIP]
> <span data-ttu-id="9a40e-415">Não sabe como a conectividade do cliente funciona no Office 365?</span><span class="sxs-lookup"><span data-stu-id="9a40e-415">Not sure how Client Connectivity works in Office 365?</span></span> <span data-ttu-id="9a40e-416">Confira o documento de referência de conectividade do cliente [aqui](https://technet.microsoft.com/library/dn741250.aspx).</span><span class="sxs-lookup"><span data-stu-id="9a40e-416">Take a look at the Client Connectivity Reference document [here](https://technet.microsoft.com/library/dn741250.aspx).</span></span>

#### <a name="tools"></a><span data-ttu-id="9a40e-417">Ferramentas</span><span class="sxs-lookup"><span data-stu-id="9a40e-417">Tools</span></span>

- <span data-ttu-id="9a40e-418">Netmon</span><span class="sxs-lookup"><span data-stu-id="9a40e-418">Netmon</span></span>
- <span data-ttu-id="9a40e-419">Wireshark</span><span class="sxs-lookup"><span data-stu-id="9a40e-419">Wireshark</span></span>
- <span data-ttu-id="9a40e-420">PsPing</span><span class="sxs-lookup"><span data-stu-id="9a40e-420">PsPing</span></span>

#### <a name="what-to-look-for"></a><span data-ttu-id="9a40e-421">O que procurar</span><span class="sxs-lookup"><span data-stu-id="9a40e-421">What to look for</span></span>

<span data-ttu-id="9a40e-422">Analisar o desempenho do DNS normalmente é outro trabalho para um rastreamento de rede.</span><span class="sxs-lookup"><span data-stu-id="9a40e-422">Analyzing DNS performance is typically another job for a network trace.</span></span> <span data-ttu-id="9a40e-423">No entanto, o PsPing também é útil para a tratação de uma possível causa.</span><span class="sxs-lookup"><span data-stu-id="9a40e-423">However, PsPing is also helpful in ruling in, or out, a possible cause.</span></span>

<span data-ttu-id="9a40e-424">O tráfego DNS é baseado em solicitações TCP e UDP, e as respostas são claramente marcadas com uma ID que ajudará a corresponder a uma solicitação específica com sua resposta específica.</span><span class="sxs-lookup"><span data-stu-id="9a40e-424">DNS traffic is based on TCP and UDP requests and responses are clearly marked with an ID that will help to match a specific request with its specific response.</span></span> <span data-ttu-id="9a40e-425">Você verá o tráfego de DNS quando, por exemplo, o SharePoint Online usa um nome de rede ou URL em uma página da Web.</span><span class="sxs-lookup"><span data-stu-id="9a40e-425">You'll see DNS traffic when, for example, SharePoint Online uses a network name or URL on a web page.</span></span> <span data-ttu-id="9a40e-426">Como regra geral, a maior parte desse tráfego, exceto durante a transferência de zonas, é executada sobre UDP.</span><span class="sxs-lookup"><span data-stu-id="9a40e-426">As a rule of thumb, most of this traffic, except when transferring Zones, runs over UDP.</span></span>

<span data-ttu-id="9a40e-427">No Netmon e no Wireshark, o filtro mais básico que permitirá que você examine o tráfego de DNS `dns`é simplesmente.</span><span class="sxs-lookup"><span data-stu-id="9a40e-427">In both Netmon and Wireshark, the most basic filter that will let you look at DNS traffic is simply `dns`.</span></span> <span data-ttu-id="9a40e-428">Certifique-se de usar minúsculas ao especificar o filtro.</span><span class="sxs-lookup"><span data-stu-id="9a40e-428">Be sure to use lower case when specifying the filter.</span></span> <span data-ttu-id="9a40e-429">Lembre-se de liberar o cache do DNS resolver antes de começar a reproduzir o problema no computador cliente.</span><span class="sxs-lookup"><span data-stu-id="9a40e-429">Remember to flush your DNS resolver cache before you begin to reproduce the issue on your client computer.</span></span> <span data-ttu-id="9a40e-430">Por exemplo, se você tiver uma carga de página lenta do SharePoint Online para a Home Page, deverá fechar todos os navegadores, abrir um novo navegador, iniciar o rastreamento, liberar o cache do DNS resolver e navegar até o site do SharePoint Online.</span><span class="sxs-lookup"><span data-stu-id="9a40e-430">For example, if you have a slow SharePoint Online page load for the Home page, you should close all browsers, open a new browser, start tracing, flush your DNS resolver cache, and browse to your SharePoint Online site.</span></span> <span data-ttu-id="9a40e-431">Depois que a página inteira for resolvida, você deverá parar e salvar o rastreamento.</span><span class="sxs-lookup"><span data-stu-id="9a40e-431">Once the entire page resolves, you should stop and save the trace.</span></span>

![No Netmon, um filtro básico para DNS é DNS.](media/1bebc118-ca13-45f3-803f-ab73e7af401d.png)

<span data-ttu-id="9a40e-433">Você deseja examinar a diferença de horário aqui.</span><span class="sxs-lookup"><span data-stu-id="9a40e-433">You want to look at the time offset here.</span></span> <span data-ttu-id="9a40e-434">E pode ser útil adicionar a coluna intervalo de **tempo** para Netmon, o que pode ser feito executando estas etapas:</span><span class="sxs-lookup"><span data-stu-id="9a40e-434">And it may be helpful to add the **Time Delta** column to Netmon which you can do by completing these steps:</span></span>

1. <span data-ttu-id="9a40e-435">Clique com o botão direito do mouse em uma coluna, como **Descrição**.</span><span class="sxs-lookup"><span data-stu-id="9a40e-435">Right-click on a column such as **Description**.</span></span>
2. <span data-ttu-id="9a40e-436">Clique em **escolher colunas**.</span><span class="sxs-lookup"><span data-stu-id="9a40e-436">Click **Choose Columns**.</span></span>
3. <span data-ttu-id="9a40e-437">Localize o _intervalo de tempo_ na lista e clique em **Adicionar**.</span><span class="sxs-lookup"><span data-stu-id="9a40e-437">Locate _Time Delta_ in the list and click **Add**.</span></span>
4. <span data-ttu-id="9a40e-438">Mova a nova coluna para o lugar antes ou para trás da coluna _Descrição_ para que você possa lê-las lado a lado.</span><span class="sxs-lookup"><span data-stu-id="9a40e-438">Move the new column into place before or behind the _Description_ column so you can read them side-by-side.</span></span>
5. <span data-ttu-id="9a40e-439">Clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="9a40e-439">Click **OK**.</span></span>

<span data-ttu-id="9a40e-440">Se você encontrar uma consulta de interesse, considere isolá-la clicando com o botão direito do mouse na consulta no painel de detalhes do quadro, escolhendo **encontrar conversas** \> **DNS**.</span><span class="sxs-lookup"><span data-stu-id="9a40e-440">If you find a query of interest, consider isolating it by right-clicking that query in the frame details panel, choosing **Find Conversations** \> **DNS**.</span></span> <span data-ttu-id="9a40e-441">Observe que o painel conversas de rede salta diretamente para a conversa específica em seu log de tráfego UDP.</span><span class="sxs-lookup"><span data-stu-id="9a40e-441">Notice that the Network Conversations panel jumps right to the specific conversation in its log of UDP traffic.</span></span>

![Um rastreamento do Netmon do Outlook online carregado por DNS e usando Localizar conversas então DNS para restringir os resultados.](media/763cf20e-7b48-4a37-9449-c9978cfe118b.PNG)

<span data-ttu-id="9a40e-443">No Wireshark, você pode criar uma coluna para o tempo de DNS.</span><span class="sxs-lookup"><span data-stu-id="9a40e-443">In Wireshark you can make a column for DNS time.</span></span> <span data-ttu-id="9a40e-444">Leve seu rastreamento (ou abra um rastreamento) no Wireshark e filtre por `dns`ou, mais útil, `dns.time`.</span><span class="sxs-lookup"><span data-stu-id="9a40e-444">Take your trace (or open a trace) in Wireshark and filter by `dns`, or, more helpfully,  `dns.time`.</span></span> <span data-ttu-id="9a40e-445">Clique em qualquer consulta DNS e, no painel mostrando detalhes, expanda os `Domain Name System (response)` detalhes.</span><span class="sxs-lookup"><span data-stu-id="9a40e-445">Click on any DNS query, and, in the panel showing details, expand the  `Domain Name System (response)` details.</span></span> <span data-ttu-id="9a40e-446">Você verá um campo para hora (por exemplo, `[Time: 0.001111100 seconds]`.</span><span class="sxs-lookup"><span data-stu-id="9a40e-446">You'll see a field for time (for example, `[Time: 0.001111100 seconds]`.</span></span> <span data-ttu-id="9a40e-447">Clique com o botão direito do mouse neste momento e selecione **aplicar como coluna**.</span><span class="sxs-lookup"><span data-stu-id="9a40e-447">Right-click this time and select **Apply as Column**.</span></span> <span data-ttu-id="9a40e-448">Isso fornecerá uma coluna de **tempo** para a classificação mais rápida do seu rastreamento.</span><span class="sxs-lookup"><span data-stu-id="9a40e-448">This will give you a **Time** column for quicker sorting of your trace.</span></span> <span data-ttu-id="9a40e-449">Clique na nova coluna para classificar por valores decrescentes para ver qual chamada DNS levou mais tempo para ser resolvida.</span><span class="sxs-lookup"><span data-stu-id="9a40e-449">Click on the new column to sort by descending values to see which DNS call took the longest to resolve.</span></span>

[<span data-ttu-id="9a40e-450">Uma procura do SharePoint Online filtrada no Wireshark por dns.time (minúsculas), com o tempo dos detalhes transformado em uma coluna e classificado em ordem crescente.</span><span class="sxs-lookup"><span data-stu-id="9a40e-450">A browse of SharePoint Online filtered in Wireshark by (lowercase) dns.time, with the time from the details made into a column and sorted ascending.</span></span>](media/1439dcc2-12ff-4ee2-9ef3-1484cf79c384.PNG)

<span data-ttu-id="9a40e-451">Se quiser fazer mais investigações do tempo de resolução de DNS, tente uma PsPing na porta DNS usada pelo TCP (por exemplo, `psping <IP address of DNS server>:53`).</span><span class="sxs-lookup"><span data-stu-id="9a40e-451">If you would like to do more investigation of the DNS resolution time, try a PsPing against the DNS port used by TCP (for example,  `psping <IP address of DNS server>:53`) .</span></span> <span data-ttu-id="9a40e-452">Você ainda está vendo um problema de desempenho?</span><span class="sxs-lookup"><span data-stu-id="9a40e-452">Do you still see a performance issue?</span></span> <span data-ttu-id="9a40e-453">Se você fizer isso, é mais provável que o problema seja um problema de rede mais amplo do que um problema de uma questão específica do aplicativo DNS que você está atingindo para fazer a resolução.</span><span class="sxs-lookup"><span data-stu-id="9a40e-453">If you do, then the problem is more likely to be a broader network issue than an issue of specific the DNS application you're hitting to do resolution.</span></span> <span data-ttu-id="9a40e-454">Vale a pena mencionar, novamente, que um ping para o outlook.office365.com informará onde a resolução de nomes DNS do Outlook online está ocorrendo (por exemplo, outlook-namnorthwest.office365.com).</span><span class="sxs-lookup"><span data-stu-id="9a40e-454">It's also worth mentioning, again, that a ping to outlook.office365.com will tell you where DNS name resolution for Outlook Online is taking place (for example, outlook-namnorthwest.office365.com).</span></span>

<span data-ttu-id="9a40e-455">Se o problema for ser específico de DNS, talvez seja necessário entrar em contato com o departamento de ti para ver as configurações de DNS e os encaminhadores de DNS para investigar ainda mais esse problema.</span><span class="sxs-lookup"><span data-stu-id="9a40e-455">If the issue looks to be DNS specific, it may be necessary to contact your IT department to look at DNS configurations and DNS Forwarders to further investigate this issue.</span></span>

### <a name="proxy-scalability"></a><span data-ttu-id="9a40e-456">Escalabilidade de proxy</span><span class="sxs-lookup"><span data-stu-id="9a40e-456">Proxy Scalability</span></span>

<span data-ttu-id="9a40e-457">Serviços como o Outlook online no Office 365 concedem a clientes várias conexões de longo prazo.</span><span class="sxs-lookup"><span data-stu-id="9a40e-457">Services like Outlook Online in Office 365 grant clients multiple long-term connections.</span></span> <span data-ttu-id="9a40e-458">Portanto, cada usuário pode usar mais conexões que exijam uma vida mais longa.</span><span class="sxs-lookup"><span data-stu-id="9a40e-458">Therefore, each user may use more connections that require a longer life.</span></span>  

#### <a name="tools"></a><span data-ttu-id="9a40e-459">Ferramentas</span><span class="sxs-lookup"><span data-stu-id="9a40e-459">Tools</span></span>

<span data-ttu-id="9a40e-460">Matemática</span><span class="sxs-lookup"><span data-stu-id="9a40e-460">Math</span></span>  

#### <a name="what-to-look-for"></a><span data-ttu-id="9a40e-461">O que procurar</span><span class="sxs-lookup"><span data-stu-id="9a40e-461">What to look for</span></span>

<span data-ttu-id="9a40e-462">Não há nenhuma ferramenta de rastreamento de rede ou solução de problemas específica.</span><span class="sxs-lookup"><span data-stu-id="9a40e-462">There is no network trace or troubleshooting tool specific to this.</span></span> <span data-ttu-id="9a40e-463">Em vez disso, ele baseia-se nos cálculos de largura de banda, dadas as limitações e outras variáveis.</span><span class="sxs-lookup"><span data-stu-id="9a40e-463">Instead, it's based upon bandwidth calculations given limitations and other variables.</span></span>  

### <a name="tcp-max-segment-size"></a><span data-ttu-id="9a40e-464">Tamanho máximo de segmento TCP</span><span class="sxs-lookup"><span data-stu-id="9a40e-464">TCP Max Segment Size</span></span>

<span data-ttu-id="9a40e-465">Encontrado no SYN-SYN/ACK.</span><span class="sxs-lookup"><span data-stu-id="9a40e-465">Found in the SYN - SYN/ACK.</span></span>  <span data-ttu-id="9a40e-466">Faça essa verificação em qualquer rastreamento de rede de desempenho que você executou para garantir que os pacotes TCP estejam configurados para transportar a quantidade máxima de dados possível.</span><span class="sxs-lookup"><span data-stu-id="9a40e-466">Do this check in any performance network trace you've taken to ensure that TCP packets are configured to carry the maximum amount of data possible.</span></span>

<span data-ttu-id="9a40e-467">O objetivo é ver um MSS de 1460 bytes para a transmissão de dados.</span><span class="sxs-lookup"><span data-stu-id="9a40e-467">The goal is to see a MSS of 1460 bytes for transmission of data.</span></span> <span data-ttu-id="9a40e-468">Se estiver por trás de um proxy, ou se estiver usando um NAT, lembre-se de executar esse teste de cliente para proxy/saída/NAT, e do proxy/saída/NAT para o Office 365 para obter os melhores resultados!</span><span class="sxs-lookup"><span data-stu-id="9a40e-468">If you're behind a proxy, or you are using a NAT, remember to run this test from client to proxy/egress/NAT, and from proxy/egress/NAT to Office 365 for best results!</span></span> <span data-ttu-id="9a40e-469">Essas são sessões TCP diferentes.</span><span class="sxs-lookup"><span data-stu-id="9a40e-469">These are different TCP sessions.</span></span>

#### <a name="tools"></a><span data-ttu-id="9a40e-470">Ferramentas</span><span class="sxs-lookup"><span data-stu-id="9a40e-470">Tools</span></span>

<span data-ttu-id="9a40e-471">Netmon</span><span class="sxs-lookup"><span data-stu-id="9a40e-471">Netmon</span></span>

#### <a name="what-to-look-for"></a><span data-ttu-id="9a40e-472">O que procurar</span><span class="sxs-lookup"><span data-stu-id="9a40e-472">What to look for</span></span>

<span data-ttu-id="9a40e-473">O tamanho de segmento máximo TCP (MSS) é outro parâmetro do handshake de três vias no seu rastreamento de rede, isso significa que você encontrará os dados necessários no pacote SYN-SYN/ACK.</span><span class="sxs-lookup"><span data-stu-id="9a40e-473">TCP Max Segment Size (MSS) is another parameter of the three-way handshake in your network trace, that means you'll find the data you need in the SYN - SYN/ACK packet.</span></span> <span data-ttu-id="9a40e-474">O MSS é realmente muito simples de ver.</span><span class="sxs-lookup"><span data-stu-id="9a40e-474">MSS is actually pretty simple to see.</span></span>

<span data-ttu-id="9a40e-475">Abra qualquer rastreamento de rede de desempenho que você tem e encontre a conexão que você está curioso ou que demonstra o problema de desempenho.</span><span class="sxs-lookup"><span data-stu-id="9a40e-475">Open any performance network trace you have and find the connection you're curious about, or that demonstrates the performance problem.</span></span>

> [!NOTE]
> <span data-ttu-id="9a40e-476">Se você estiver olhando para um rastreamento e precisar encontrar o tráfego relevante para sua conversa, filtre pelo IP do cliente ou pelo IP do servidor proxy ou ponto de saída ou ambos.</span><span class="sxs-lookup"><span data-stu-id="9a40e-476">If you are looking at a trace and need to find the traffic relevant to your conversation, filter by the IP of the Client, or the IP of the proxy server or egress point, or both.</span></span> <span data-ttu-id="9a40e-477">Indo diretamente, você precisará executar o ping na URL que você está testando para o endereço IP do Office 365 no rastreamento e filtrá-la.</span><span class="sxs-lookup"><span data-stu-id="9a40e-477">Going directly, you will need to ping the URL that you're testing for the IP address of Office 365 in the trace, and filter by it.</span></span>

<span data-ttu-id="9a40e-478">Examinando o rastreamento de segunda mão?</span><span class="sxs-lookup"><span data-stu-id="9a40e-478">Looking at the trace second-hand?</span></span> <span data-ttu-id="9a40e-479">Tente usar filtros para se orientar.</span><span class="sxs-lookup"><span data-stu-id="9a40e-479">Try using filters to orient yourself.</span></span> <span data-ttu-id="9a40e-480">No Netmon, execute uma pesquisa com base na URL, como `Containsbin(framedata, ascii, "sphybridExample")`, anote o número do quadro.</span><span class="sxs-lookup"><span data-stu-id="9a40e-480">In Netmon, run a search based on the URL, such as `Containsbin(framedata, ascii, "sphybridExample")`, take note of the frame number.</span></span>

<span data-ttu-id="9a40e-481">No Wireshark, use algo `frame contains "sphybridExample"`como.</span><span class="sxs-lookup"><span data-stu-id="9a40e-481">In Wireshark use something like  `frame contains "sphybridExample"`.</span></span> <span data-ttu-id="9a40e-482">Se você notar que encontrou tráfego de Winsock (RWS) remoto (pode aparecer como [PSH, ACK] no Wireshark), lembre-se de que o RWS se conecta pode ser visto logo antes de SYN-SYN/ACKs relevantes, conforme discutido anteriormente.</span><span class="sxs-lookup"><span data-stu-id="9a40e-482">If you notice that you've found Remote Winsock (RWS) traffic (it may appear as a [PSH, ACK] in Wireshark), remember that RWS connects can be seen shortly before relevant SYN - SYN/ACKs, as discussed earlier.</span></span>

<span data-ttu-id="9a40e-483">Neste ponto, você pode gravar o número do quadro, remover o filtro, clicar em **toda** a janela de conversas da rede no netmon para examinar o SYN mais próximo.</span><span class="sxs-lookup"><span data-stu-id="9a40e-483">At this point, you can record the frame number, drop the filter, click **All Traffic** in the Network Conversations window in Netmon to look at the nearest SYN.</span></span>

<span data-ttu-id="9a40e-484">Importante, se você não recebeu nenhuma das informações de endereço IP no momento do rastreamento, localizar a URL no rastreamento (parte do `sphybridExample-my.sharepoint.com`, por exemplo) fornecerá endereços IP para filtrar por.</span><span class="sxs-lookup"><span data-stu-id="9a40e-484">Importantly, if you didn't receive any of the IP address information at the time of the trace, finding your URL in the trace (part of `sphybridExample-my.sharepoint.com`, for example), will give you IP addresses to filter by.</span></span>

<span data-ttu-id="9a40e-485">Localize a conexão no rastreamento que você está interessado em ver.</span><span class="sxs-lookup"><span data-stu-id="9a40e-485">Locate the connection in the trace that you're interested in seeing.</span></span> <span data-ttu-id="9a40e-486">Você pode fazer isso verificando o rastreamento, filtrando por endereços IP ou selecionando IDs de conversa específicas usando a janela conversas de rede no Netmon.</span><span class="sxs-lookup"><span data-stu-id="9a40e-486">You may do this by either scanning the trace, by filtering by IP addresses, or by selecting specific Conversation IDs using the Network Conversations window in Netmon.</span></span> <span data-ttu-id="9a40e-487">Depois de encontrar o pacote SYN, expanda TCP (no Netmon) ou protocolo de controle de transmissão (no Wireshark) no painel detalhes do quadro.</span><span class="sxs-lookup"><span data-stu-id="9a40e-487">Once you've found the SYN packet, expand TCP (in Netmon), or Transmission Control Protocol (in Wireshark) in the Frame Details panel.</span></span> <span data-ttu-id="9a40e-488">Expanda as opções de TCP e MaxSegmentSize.</span><span class="sxs-lookup"><span data-stu-id="9a40e-488">Expand TCP Options and MaxSegmentSize.</span></span> <span data-ttu-id="9a40e-489">Localize o quadro SYN-ACK relacionado e expanda as opções TCP e MaxSegmentSize.</span><span class="sxs-lookup"><span data-stu-id="9a40e-489">Locate the related SYN-ACK frame and Expand TCP Options and MaxSegmentSize.</span></span> <span data-ttu-id="9a40e-490">O menor dos dois valores será seu tamanho máximo de segmento.</span><span class="sxs-lookup"><span data-stu-id="9a40e-490">The smaller of the two values will be your Maximum Segment Size.</span></span> <span data-ttu-id="9a40e-491">Nesta imagem, uso a coluna interna no Netmon chamada solução de problemas TCP.</span><span class="sxs-lookup"><span data-stu-id="9a40e-491">In this picture, I make use of the built-in Column in Netmon called TCP Troubleshoot.</span></span>  

![Rastreamento de rede filtrado no Netmon usando as colunas internas.](media/e073df13-71f8-497a-83b4-bb9f70bd9833.PNG)

<span data-ttu-id="9a40e-493">A coluna interna fica na parte superior do painel de **detalhes do quadro** .</span><span class="sxs-lookup"><span data-stu-id="9a40e-493">The built-in column is at the top of the **Frame Details** panel.</span></span> <span data-ttu-id="9a40e-494">(Para retornar ao modo de exibição normal, clique em **colunas** novamente e escolha **fuso horário**.)</span><span class="sxs-lookup"><span data-stu-id="9a40e-494">(To switch back to your normal view, click **Columns** again, and then choose **Time Zone**.)</span></span>

![Onde encontrar a lista suspensa Colunas para a opção Solução de Problemas de TCP (na parte superior do Resumo do Quadro).](media/64fd4baa-a872-4f07-b959-752d7d37fd62.PNG)

<span data-ttu-id="9a40e-496">Aqui está um rastreamento filtrado no Wireshark.</span><span class="sxs-lookup"><span data-stu-id="9a40e-496">Here's a filtered trace in Wireshark.</span></span> <span data-ttu-id="9a40e-497">Há um filtro específico para o valor de MSS ( `tcp.options.mss`).</span><span class="sxs-lookup"><span data-stu-id="9a40e-497">There is a filter specific to the MSS value ( `tcp.options.mss`).</span></span> <span data-ttu-id="9a40e-498">Os quadros de um handshake SYN, SYN/ACK, ACK são vinculados na parte inferior do Wireshark equivalente ao quadro detalhes (de forma que o quadro 47 ACK, links para 46 SYN/ACK, links para 43 SYN) para facilitar esse tipo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="9a40e-498">The frames of a SYN, SYN/ACK, ACK handshake are linked at the bottom of the Wireshark equivalent to Frame Details (so frame 47 ACK, links to 46 SYN/ACK, links to 43 SYN) to make this kind of work easier.</span></span>

![Rastreamento filtrado no Wireshark por TCP. Options para o tamanho de segmento máximo (MSS).](media/51e278db-801b-48bc-9b68-87cf92f03fd6.PNG)

<span data-ttu-id="9a40e-500">Se você precisar verificar a **confirmação seletiva** (próximo tópico desta matriz), não feche seu rastreamento!</span><span class="sxs-lookup"><span data-stu-id="9a40e-500">If you need to check **Selective Acknowledgment** (next topic in this matrix), don't close your trace!</span></span>

### <a name="selective-acknowledgment"></a><span data-ttu-id="9a40e-501">Reconhecimento seletivo</span><span class="sxs-lookup"><span data-stu-id="9a40e-501">Selective Acknowledgment</span></span>

<span data-ttu-id="9a40e-502">Encontrado no SYN-SYN/ACK.</span><span class="sxs-lookup"><span data-stu-id="9a40e-502">Found in the SYN - SYN/ACK.</span></span> <span data-ttu-id="9a40e-503">Deve ser relatado como permitido em SYN e SYN/ACK.</span><span class="sxs-lookup"><span data-stu-id="9a40e-503">Must be reported as Permitted in both SYN and SYN/ACK.</span></span> <span data-ttu-id="9a40e-504">O SACK (reconhecimento seletivo) permite a retransmissão mais suave de dados quando um pacote ou pacotes estão ausentes.</span><span class="sxs-lookup"><span data-stu-id="9a40e-504">Selective Acknowledgment (SACK) allows for smoother retransmission of data when a packet or packets go missing.</span></span> <span data-ttu-id="9a40e-505">Os dispositivos podem desabilitar esse recurso, que pode levar a problemas de desempenho.</span><span class="sxs-lookup"><span data-stu-id="9a40e-505">Devices can disable this feature, which can lead to performance problems.</span></span>

<span data-ttu-id="9a40e-506">Se estiver por trás de um proxy, ou se estiver usando um NAT, lembre-se de executar esse teste de cliente para proxy/saída/NAT, e do proxy/saída/NAT para o Office 365 para obter os melhores resultados!</span><span class="sxs-lookup"><span data-stu-id="9a40e-506">If you're behind a proxy, or you are using a NAT, remember to run this test from client to proxy/egress/NAT, and from proxy/egress/NAT to Office 365 for best results!</span></span> <span data-ttu-id="9a40e-507">Essas são sessões TCP diferentes.</span><span class="sxs-lookup"><span data-stu-id="9a40e-507">These are different TCP sessions.</span></span>

#### <a name="tools"></a><span data-ttu-id="9a40e-508">Ferramentas</span><span class="sxs-lookup"><span data-stu-id="9a40e-508">Tools</span></span>

<span data-ttu-id="9a40e-509">Netmon</span><span class="sxs-lookup"><span data-stu-id="9a40e-509">Netmon</span></span>

#### <a name="what-to-look-for"></a><span data-ttu-id="9a40e-510">O que procurar</span><span class="sxs-lookup"><span data-stu-id="9a40e-510">What to look for</span></span>

<span data-ttu-id="9a40e-511">O SACK (reconhecimento seletivo) é outro parâmetro no handshake SYN-SYN/ACK.</span><span class="sxs-lookup"><span data-stu-id="9a40e-511">Selective Acknowledgment (SACK) is another parameter in the SYN-SYN/ACK handshake.</span></span> <span data-ttu-id="9a40e-512">Você pode filtrar seu rastreamento para SYN-SYN/ACK de várias maneiras.</span><span class="sxs-lookup"><span data-stu-id="9a40e-512">You can filter your trace for SYN - SYN/ACK many ways.</span></span>

<span data-ttu-id="9a40e-513">Localize a conexão no rastreamento que você está interessado em ver examinando o rastreamento, filtragem por endereços IP ou clicando em uma ID de conversa usando a janela conversas de rede no Netmon.</span><span class="sxs-lookup"><span data-stu-id="9a40e-513">Locate the connection in the trace that you're interested in seeing either by scanning the trace, filtering by IP addresses, or by clicking a Conversation ID using the Network Conversations window in Netmon.</span></span> <span data-ttu-id="9a40e-514">Depois de encontrar o pacote SYN, expanda TCP no Netmon ou protocolo de controle de transmissão no Wireshark na seção detalhes do quadro.</span><span class="sxs-lookup"><span data-stu-id="9a40e-514">Once you've found the SYN packet, expand TCP in Netmon, or Transmission Control Protocol in Wireshark in the Frame Details section.</span></span> <span data-ttu-id="9a40e-515">Expanda as opções TCP e o SACK.</span><span class="sxs-lookup"><span data-stu-id="9a40e-515">Expand TCP Options and then SACK.</span></span> <span data-ttu-id="9a40e-516">Localize o quadro SYN-ACK relacionado e expanda as opções TCP e seu campo de SACK.</span><span class="sxs-lookup"><span data-stu-id="9a40e-516">Locate the related SYN-ACK frame and Expand TCP Options and its SACK field.</span></span> <span data-ttu-id="9a40e-517">Certifique-se de que o SACK seja permitido tanto no SYN quanto no SYN/ACK.</span><span class="sxs-lookup"><span data-stu-id="9a40e-517">Make certain SACK is permitted in both SYN and SYN/ACK.</span></span> <span data-ttu-id="9a40e-518">Aqui estão os valores de SACK como visto no Netmon e no Wireshark.</span><span class="sxs-lookup"><span data-stu-id="9a40e-518">Here are SACK values as seen in both Netmon and Wireshark.</span></span>

![Reconhecimento seletivo (SACK) em Netmon como resultado de TCP. Flags. SYN = = 1.](media/216f556f-5031-4ed2-b066-a0d9b3251fa2.PNG)

![SACK como visto no Wireshark com o filtro tcp.flags.syn == 1.](media/0a6e26e5-43dc-403b-adc9-3349a55f4e4b.PNG)

### <a name="dns-geolocation"></a><span data-ttu-id="9a40e-521">Localização geográfica de DNS</span><span class="sxs-lookup"><span data-stu-id="9a40e-521">DNS Geolocation</span></span>

<span data-ttu-id="9a40e-522">Onde no mundo da empresa 365 tenta resolver seus efeitos de chamada DNS sua velocidade de conexão.</span><span class="sxs-lookup"><span data-stu-id="9a40e-522">Where in the world Office 365 tries to resolve your DNS call effects your connection speed.</span></span>

<span data-ttu-id="9a40e-523">No Outlook online, após a conclusão da primeira pesquisa de DNS, a localização desse DNS será usada para se conectar ao seu datacenter mais próximo.</span><span class="sxs-lookup"><span data-stu-id="9a40e-523">In Outlook Online, after the first DNS lookup is completed, the location of that DNS will be used to connect to your nearest datacenter.</span></span> <span data-ttu-id="9a40e-524">Você será conectado a um servidor CAS do Outlook online, que usará a rede de backbone para se conectar ao datacenter (dC) onde seus dados estão armazenados.</span><span class="sxs-lookup"><span data-stu-id="9a40e-524">You will be connected to an Outlook Online CAS server, which will use the backbone network to connect to the datacenter (dC) where your data is stored.</span></span> <span data-ttu-id="9a40e-525">Isso é mais rápido.</span><span class="sxs-lookup"><span data-stu-id="9a40e-525">This is faster.</span></span>

<span data-ttu-id="9a40e-526">Ao acessar o SharePoint Online, um usuário viajando o exterior será direcionado para o seu data center ativo, que é o dC cujo local se baseia na base do locatário do SPO (portanto, um dC nos EUA se o usuário for baseado em USA).</span><span class="sxs-lookup"><span data-stu-id="9a40e-526">When accessing SharePoint Online, a user traveling abroad will be directed to their active datacenter -- that's the dC whose location is based on their SPO tenant's home-base (so, a dC in the USA if the user if USA-based).</span></span>

<span data-ttu-id="9a40e-527">O Lync Online tem nós ativos em mais de um dC por vez.</span><span class="sxs-lookup"><span data-stu-id="9a40e-527">Lync online has active nodes in more than one dC at a time.</span></span> <span data-ttu-id="9a40e-528">Quando as solicitações são enviadas para instâncias do Lync Online, o DNS da Microsoft determinará em que parte do mundo a solicitação veio e retornarão endereços IP do dC regional mais próximo onde o Lync Online está ativo.</span><span class="sxs-lookup"><span data-stu-id="9a40e-528">When requests are sent for Lync online instances, Microsoft's DNS will determine where in the world the request came from, and return IP addresses from the nearest regional dC where Lync online is active.</span></span>

> [!TIP]
> <span data-ttu-id="9a40e-529">Precisa saber mais sobre como os clientes se conectam ao Office 365?</span><span class="sxs-lookup"><span data-stu-id="9a40e-529">Need to know more about how clients connect to Office 365?</span></span> <span data-ttu-id="9a40e-530">Dê uma olhada no artigo de referência de [conectividade do cliente](https://technet.microsoft.com/library/dn741250.aspx) (e seus gráficos úteis).</span><span class="sxs-lookup"><span data-stu-id="9a40e-530">Take a look at the [Client Connectivity](https://technet.microsoft.com/library/dn741250.aspx) reference article (and its helpful graphics).</span></span>

#### <a name="tools"></a><span data-ttu-id="9a40e-531">Ferramentas</span><span class="sxs-lookup"><span data-stu-id="9a40e-531">Tools</span></span>

- <span data-ttu-id="9a40e-532">Deverá</span><span class="sxs-lookup"><span data-stu-id="9a40e-532">Ping</span></span>
- <span data-ttu-id="9a40e-533">PsPing</span><span class="sxs-lookup"><span data-stu-id="9a40e-533">PsPing</span></span>

#### <a name="what-to-look-for"></a><span data-ttu-id="9a40e-534">O que procurar</span><span class="sxs-lookup"><span data-stu-id="9a40e-534">What to look for</span></span>

<span data-ttu-id="9a40e-535">As solicitações de resolução de nome dos servidores DNS do cliente para os servidores DNS da Microsoft devem, na maioria dos casos, resultar no DNS da Microsoft que está retornando o endereço IP de um datacenter regional (dC).</span><span class="sxs-lookup"><span data-stu-id="9a40e-535">Requests for name resolution from the client's DNS servers to Microsoft's DNS servers should in most cases result in Microsoft DNS returning the IP address of a regional datacenter (dC).</span></span> <span data-ttu-id="9a40e-536">O que isso significa para você?</span><span class="sxs-lookup"><span data-stu-id="9a40e-536">What does this mean for you?</span></span> <span data-ttu-id="9a40e-537">Se sua sede estiver em Bangalore, Índia, mas você estiver viajando nos Estados Unidos, quando o navegador fizer uma solicitação para o Outlook online, os servidores DNS da Microsoft devem mãos a seus endereços IP aos datacenters no datacenter regional dos Estados Unidos.</span><span class="sxs-lookup"><span data-stu-id="9a40e-537">If your headquarters are in Bangalore, India, but you are traveling in the United States, when your browser makes a request for Outlook Online, Microsoft's DNS servers should hand you IP addresses to datacenters in the United States -- a regional datacenter.</span></span> <span data-ttu-id="9a40e-538">Se o email for necessário no Outlook, esses dados viajarão através da rede de backbone rápido da Microsoft entre os data centers.</span><span class="sxs-lookup"><span data-stu-id="9a40e-538">If mail is needed from Outlook, that data will travel across Microsoft's quick backbone network between the datacenters.</span></span>

<span data-ttu-id="9a40e-539">O DNS funciona mais rápido quando a resolução de nome é feita o mais próximo possível ao local do usuário.</span><span class="sxs-lookup"><span data-stu-id="9a40e-539">DNS works fastest when name resolution is done as close to the user location as possible.</span></span> <span data-ttu-id="9a40e-540">Se você estiver na Europa, você deseja ir para um DNS da Microsoft na Europa e (idealmente) lidar com um datacenter na Europa.</span><span class="sxs-lookup"><span data-stu-id="9a40e-540">If you're in Europe, you want to go to a Microsoft DNS in Europe, and (ideally) deal with a datacenter in Europe.</span></span> <span data-ttu-id="9a40e-541">O desempenho de um cliente na Europa indo para o DNS e um datacenter na América será mais lento.</span><span class="sxs-lookup"><span data-stu-id="9a40e-541">Performance from a client in Europe going to DNS and a datacenter in America will be slower.</span></span>

<span data-ttu-id="9a40e-542">Execute a ferramenta Ping em relação ao outlook.office365.com para determinar onde no mundo sua solicitação de DNS está sendo roteada.</span><span class="sxs-lookup"><span data-stu-id="9a40e-542">Run the Ping tool against outlook.office365.com to determine where in the world your DNS request is being routed.</span></span> <span data-ttu-id="9a40e-543">Se você estiver na Europa, deverá ver uma resposta de algo semelhante a outlook-emeawest.office365.com.</span><span class="sxs-lookup"><span data-stu-id="9a40e-543">If you are in Europe, you should see a reply from something like outlook-emeawest.office365.com.</span></span> <span data-ttu-id="9a40e-544">Nas Américas, espere algo como outlook-namnorthwest.office365.com.</span><span class="sxs-lookup"><span data-stu-id="9a40e-544">In the Americas, expect something like outlook-namnorthwest.office365.com.</span></span>

<span data-ttu-id="9a40e-545">Abra o prompt de comando no computador cliente (por meio \> de \> Iniciar Executar cmd ou \> tipo de tecla do Windows cmd).</span><span class="sxs-lookup"><span data-stu-id="9a40e-545">Open the command prompt on the client computer (via Start \> Run \> cmd or Windows key \> type cmd).</span></span> <span data-ttu-id="9a40e-546">Digite ping outlook.office365.com e pressione ENTER.</span><span class="sxs-lookup"><span data-stu-id="9a40e-546">Type ping outlook.office365.com and press ENTER.</span></span> <span data-ttu-id="9a40e-547">Lembre-se de especificar-4 se você quiser especificar o ping via IPv4.</span><span class="sxs-lookup"><span data-stu-id="9a40e-547">Remember, to specify -4 if you want to specify to ping via IPv4.</span></span> <span data-ttu-id="9a40e-548">Você pode não conseguir receber uma resposta dos pacotes ICMP, mas deve ver o nome do DNS para o qual a solicitação foi encaminhada.</span><span class="sxs-lookup"><span data-stu-id="9a40e-548">You may fail to get a reply from the ICMP packets, but you should see the name of the DNS to which the request was routed.</span></span> <span data-ttu-id="9a40e-549">Se você quiser ver os números de latência para esta conexão, tente PsPing para o endereço IP do servidor retornado por ping.</span><span class="sxs-lookup"><span data-stu-id="9a40e-549">If you want to see the latency numbers for this connection try PsPing to the IP address of the server that is returned by ping.</span></span>  

![Ping de outlook.office365.com mostrando a resolução em outlook-namnorthwest.](media/06c944d5-6159-43ec-aa31-757770695e8b.PNG)

![PSPing para o endereço IP retornado pelo ping para outlook.office365.com mostrando a latência média de 28 milissegundos.](media/f2b25a75-1a87-4479-b8a7-fa4375683507.PNG)

### <a name="office-365-application-troubleshooting"></a><span data-ttu-id="9a40e-552">Solução de problemas de aplicativos do Office 365</span><span class="sxs-lookup"><span data-stu-id="9a40e-552">Office 365 Application Troubleshooting</span></span>

#### <a name="tools"></a><span data-ttu-id="9a40e-553">Ferramentas</span><span class="sxs-lookup"><span data-stu-id="9a40e-553">Tools</span></span>

- <span data-ttu-id="9a40e-554">Netmon</span><span class="sxs-lookup"><span data-stu-id="9a40e-554">Netmon</span></span>
- <span data-ttu-id="9a40e-555">HTTPWatch</span><span class="sxs-lookup"><span data-stu-id="9a40e-555">HTTPWatch</span></span>
- <span data-ttu-id="9a40e-556">Console F12 no navegador</span><span class="sxs-lookup"><span data-stu-id="9a40e-556">F12 Console in the browser</span></span>

<span data-ttu-id="9a40e-557">Não abordaremos as ferramentas usadas na solução de problemas específica do aplicativo neste artigo específico da rede.</span><span class="sxs-lookup"><span data-stu-id="9a40e-557">We don't cover tools used in application-specific troubleshooting in this network-specific article.</span></span> <span data-ttu-id="9a40e-558">Mas você encontrará recursos que *podem* ser usados [nesta página](https://support.office.com/article/Network-planning-and-performance-tuning-for-Office-365-e5f1228c-da3c-4654-bf16-d163daee8848).</span><span class="sxs-lookup"><span data-stu-id="9a40e-558">But you'll find resources you  *can*  use [on this page](https://support.office.com/article/Network-planning-and-performance-tuning-for-Office-365-e5f1228c-da3c-4654-bf16-d163daee8848).</span></span>

## <a name="related-topics"></a><span data-ttu-id="9a40e-559">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="9a40e-559">Related Topics</span></span>

[<span data-ttu-id="9a40e-560">Gerenciar pontos de extremidade do Office 365</span><span class="sxs-lookup"><span data-stu-id="9a40e-560">Managing Office 365 endpoints</span></span>](https://support.office.com/article/99cab9d4-ef59-4207-9f2b-3728eb46bf9a)
  
[<span data-ttu-id="9a40e-561">Perguntas frequentes sobre pontos de extremidade do Office 365</span><span class="sxs-lookup"><span data-stu-id="9a40e-561">Office 365 endpoints FAQ</span></span>](https://support.office.com/article/d4088321-1c89-4b96-9c99-54c75cae2e6d)
